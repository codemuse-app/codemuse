(()=>{"use strict";var e,t,i,s={2410:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileMatcher=void 0;const s=i(6657),n=/\.pyi?$/;t.FileMatcher=class{constructor(e,t){this._configOptions=e,this._fs=t,this._console=console}matchFiles(e,t){const i=[["bin","activate"],["Scripts","activate"],["pyvenv.cfg"]],n=[],r=Date.now();let o=!1;const a=(e,a)=>{if(o||.001*(Date.now()-r)>=10&&(this._console.error('Enumeration of workspace source files is taking longer than 10 seconds.\nThis may be because:\n* You have opened your home directory or entire hard drive as a workspace\n* Your workspace contains a very large number of directories and files\n* Your workspace contains a symlink to a directory with many files\n* Your workspace is remote, and file enumeration is slow\nTo reduce this time, open a workspace directory with fewer files or add a pyrightconfig.json configuration file with an "exclude" section to exclude subdirectories from your workspace. For more details, refer to https://github.com/microsoft/pyright/blob/main/docs/configuration.md.'),o=!0),this._configOptions.autoExcludeVenv&&i.some((t=>this._fs.existsSync((0,s.combinePaths)(e,...t)))))return void this._console.info(`Auto-excluding ${e}`);const{files:l,directories:u}=(0,s.getFileSystemEntries)(this._fs,e);for(const i of l){const r=(0,s.combinePaths)(e,i);this._matchIncludeFileSpec(a,t,r)&&n.push(r)}for(const i of u){const n=(0,s.combinePaths)(e,i);a.test(n)&&(this._isInExcludePath(n,t)||c(n,a))}},l=new Set,c=(e,t)=>{const i=(0,s.tryRealpath)(this._fs,e);if(i)if(l.has(i))this._console.warn(`Skipping recursive symlink "${e}" -> "${i}"`);else{l.add(i);try{a(e,t)}finally{l.delete(i)}}else this._console.warn(`Skipping broken link "${e}"`)};return e.forEach((e=>{if(!this._isInExcludePath(e.wildcardRoot,t)){let t=!1;const i=(0,s.tryStat)(this._fs,e.wildcardRoot);(null==i?void 0:i.isFile())?this._shouldIncludeFile(e.wildcardRoot)&&(n.push(e.wildcardRoot),t=!0):(null==i?void 0:i.isDirectory())&&(c(e.wildcardRoot,e.regExp),t=!0),t||this._console.error(`File or directory "${e.wildcardRoot}" does not exist.`)}})),n}_matchIncludeFileSpec(e,t,i){return!(!e.test(i)||this._isInExcludePath(i,t)||!this._shouldIncludeFile(i))}_shouldIncludeFile(e){return n.test(e)}_isInExcludePath(e,t){return!!t.find((t=>t.regExp.test(e)))}}},714:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mainCommand=t.DEFAULT_OUTPUT_FILE=void 0;const n=i(7461),r=s(i(4147));t.DEFAULT_OUTPUT_FILE="index.scip";const o=e=>{if(void 0===e)return;const t=parseFloat(e);if(isNaN(t))throw new n.InvalidArgumentError("Not a number.");return t};t.mainCommand=function(e,i,s){const a=new n.Command;return a.name("scip-python").version(r.default.version).description("SCIP indexer for Python"),a.command("index").option("--project-name <name>","The name of the current project, pypi name if applicable. The default empty project name only supports repository-local code navigation in Sourcegraph.","").option("--project-version <version>","The version of the current project. If not provided, defaults to the current git revision (if found).").option("--project-namespace <namespace>","A prefix to prepend to all module definitions in the current index").option("--cwd <path>","working directory for executing scip-python",process.cwd()).option("--target-only <path>","limit analysis to the following path").option("--output <path>","Path to the output file. If this path is relative, it is interpreted relative to the value for --cwd.",t.DEFAULT_OUTPUT_FILE).option("--quiet","run without logging and status information",!1).option("--show-progress-rate-limit <limit>","minimum number of seconds between progress messages in the output.",o).option("--environment <json-file>","the environment json file (experimental)").option("--dev","run in developer mode (experimental)",!1).action((t=>{e(t)})),a.command("snapshot-dir").addHelpText("before","[Unstable implementation detail, use at your own risk!]").argument("<path>","the directory containing `input` directories").option("--check","whether to update or check",!1).option("--only <name>","only generate snapshots for <name>").option("--project-name <name>","the name of the current project, pypi name if applicable","").option("--project-version <version>","the name of the current project, pypi name if applicable","").option("--output <path>","Path to the output file. If this path is relative, it is interpreted relative to the value for --cwd.",t.DEFAULT_OUTPUT_FILE).option("--environment <json-file>","the environment json file (experimental)").option("--no-index","skip indexing (use existing index.scip)").option("--quiet","run without logging and status information",!1).option("--show-progress-rate-limit <limit>","minimum number of seconds between progress messages in the output.",o).action(((e,t)=>{i(e,t)})),a.command("environment-dump").requiredOption("--output <path>","the output path for the json file").action((e=>{s(e)})),a}},1847:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTypeImplementable=void 0;const s=i(1133);t.isTypeImplementable=function e(t,i,n=!1,r=!1,o=0,a=!1){var l,c;if(t===i)return!0;if(t.category!==i.category)return!1;if(!r&&t.flags!==i.flags)return!1;if(o>30)return!0;switch(o++,t.category){case 7:{const r=i;if(!s.ClassType.isSameGenericClass(t,r,o))return!1;if(!s.TypeCondition.isSame(t.condition,i.condition))return!1;if(!n||!s.ClassType.isPseudoGenericClass(t))if(t.tupleTypeArguments&&r.tupleTypeArguments){const i=t.tupleTypeArguments||[],s=r.tupleTypeArguments||[];if(i.length!==s.length)return!1;for(let t=0;t<i.length;t++){if(!e(i[t].type,s[t].type,n,!1,o,a))return!1;if(i[t].isUnbounded!==s[t].isUnbounded)return!1}}else{const i=t.typeArguments||[],l=r.typeArguments||[],c=Math.max(i.length,l.length);for(let t=0;t<c;t++)if(!e(t<i.length?i[t]:s.AnyType.create(),t<l.length?l[t]:s.AnyType.create(),n,!1,o,a))return!1}return!!s.ClassType.isLiteralValueSame(t,r)}case 5:{const r=i,l=t.details.parameters,c=r.details.parameters;if(l.length!==c.length)return!1;const u=l.findIndex((e=>0===e.category&&!e.name)),d=c.findIndex((e=>0===e.category&&!e.name));for(let i=0;i<l.length;i++){const h=l[i],p=c[i];if(h.category!==p.category)return!1;const m=void 0!==u&&i>=u;if(m!==(void 0!==d&&i>=d))return!1;if(m&&h.name!==p.name)return!1;if(!e(s.FunctionType.getEffectiveParameterType(t,i),s.FunctionType.getEffectiveParameterType(r,i),n,!1,o,a))return!1}let h=t.details.declaredReturnType;t.specializedTypes&&t.specializedTypes.returnType&&(h=t.specializedTypes.returnType),!h&&t.inferredReturnType&&(h=t.inferredReturnType);let p=r.details.declaredReturnType;return r.specializedTypes&&r.specializedTypes.returnType&&(p=r.specializedTypes.returnType),!p&&r.inferredReturnType&&(p=r.inferredReturnType),!!(!h&&!p||h&&p&&e(h,p,n,!1,o))}case 6:{const s=i;if(t.overloads.length!==s.overloads.length)return!1;for(let i=0;i<t.overloads.length;i++)if(!e(t.overloads[i],s.overloads[i],n,r,o))return!1;return!0}case 9:{const e=i,n=t.subtypes,r=e.subtypes;return n.length===r.length&&void 0===(0,s.findSubtype)(t,(t=>!s.UnionType.containsType(e,t,void 0,o)))}case 10:{const r=i;if(a&&t.details.isSynthesizedSelf&&r.details.isSynthesizedSelf)return!0;if(t.scopeId!==r.scopeId)return!1;if(t.details.recursiveTypeParameters&&r.details.recursiveTypeParameters){const r=(null===(l=null==t?void 0:t.typeAliasInfo)||void 0===l?void 0:l.typeArguments)||[],a=(null===(c=null==i?void 0:i.typeAliasInfo)||void 0===c?void 0:c.typeArguments)||[],u=Math.max(r.length,a.length);for(let t=0;t<u;t++)if(!e(t<r.length?r[t]:s.AnyType.create(),t<a.length?a[t]:s.AnyType.create(),n,!1,o))return!1}if(t.details===r.details)return!0;if(t.details.name!==r.details.name||t.details.isParamSpec!==r.details.isParamSpec||t.details.isVariadic!==r.details.isVariadic||t.details.isSynthesized!==r.details.isSynthesized||t.details.declaredVariance!==r.details.declaredVariance||t.scopeId!==r.scopeId)return!1;const u=t.details.boundType,d=r.details.boundType;if(u){if(!d||!e(u,d,n,!1,o))return!1}else if(d)return!1;const h=t.details.constraints,p=r.details.constraints;if(h.length!==p.length)return!1;for(let t=0;t<h.length;t++)if(!e(h[t],p[t],n,!1,o))return!1;return!0}case 8:{const e=i;return t.fields===e.fields||0===t.fields.size&&0===e.fields.size}}return!0}},7497:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScipSymbol=void 0;const s=i(3309);class n extends s.LsifSymbol{constructor(e){super(e)}static package(e,t){return e=r(e),t=r(t),new s.LsifSymbol(`scip-python python ${e} ${t} `)}}function r(e){return""===e?".":-1===e.indexOf(" ")?e:e.replace(/ /g,"  ")}t.ScipSymbol=n},3151:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TypeStubExtendedWriter=void 0;const o=i(1133),a=i(2590),l=r(i(5168)),c=r(i(8494));class u extends a.TypeStubWriter{constructor(e,t){super("",e,t),this.evaluator=t,this.docstrings=new Map}visitClass(e){const t=e.name.value;let i="";i+=this._printDecorators(e.decorators),i+=`class ${t}`;const s=e.arguments.filter((e=>void 0!==e.name||0!==e.argumentCategory||38!==e.valueExpression.nodeType||"object"!==e.valueExpression.value));return s.length>0&&(i+=`(${s.map((e=>{let t="";return e.name&&(t=e.name.value+"="),t+=this._printExpression(e.valueExpression),t})).join(", ")})`),i+=":",this.docstrings.set(e.id,[i]),!1}visitFunction(e){const t=e.name.token.value;let i="";i+=this._printDecorators(e.decorators),i+=e.isAsync?"async ":"",i+=`def ${t}`;const s=e.parameters.map(((t,i)=>this._printParameter(t,e,i)));let n;if(s.length<=0?i+=`(${s.join(", ")})`:i+=`(\n  ${s.join(",\n  ")}\n)`,e.returnTypeAnnotation?n=this._printExpression(e.returnTypeAnnotation,!0):e.functionAnnotationComment?n=this._printExpression(e.functionAnnotationComment.returnTypeAnnotation,!0):"__init__"===e.name.value?n="None":"__str__"===e.name.value?n="str":["__int__","__hash__"].some((t=>t===e.name.value))?n="int":["__eq__","__ne__","__gt__","__lt__","__ge__","__le__"].some((t=>t===e.name.value))&&(n="bool"),n&&(i+=" -> "+n),i+=":",!n){const t=this.evaluator.getTypeOfFunction(e);if(t&&(0,o.isFunction)(t.functionType)){let e=this.evaluator.getFunctionInferredReturnType(t.functionType);e=(0,o.removeUnknownFromUnion)(e),(0,o.isNever)(e)||(0,o.isUnknown)(e)||(i+=` # -> ${this.evaluator.printType(e,{expandTypeAlias:!1})}:`)}}return this.docstrings.set(e.id,[i]),!0}visitAssignment(e){let t=!1,i="";if(38===e.leftExpression.nodeType){const s=this.evaluator.getType(e.leftExpression);if(e.typeAnnotationComment?i+=this._printExpression(e.typeAnnotationComment,!0):s&&(i+=l.getFullNameOfType(s)),null==s?void 0:s.typeAliasInfo)t=!0;else if(9===e.rightExpression.nodeType){const i=this.evaluator.getType(e.rightExpression.leftExpression);i&&(0,o.isInstantiableClass)(i)&&o.ClassType.isBuiltIn(i,["TypeVar","TypeVarTuple","ParamSpec","NewType"])&&(t=!0)}}return i&&(t&&(i+=" = ",i+=this._printExpression(e.rightExpression)),this.docstrings.set(e.id,[i])),!0}_printParameter(e,t,i){let s="";1===e.category?s+="*":2===e.category&&(s+="**"),e.name&&(s+=e.name.value);const n=c.getTypeAnnotationForParameter(t,i);let r="";return n&&(r=this._printExpression(n,!0)),r&&(s+=": "+r),e.defaultValue&&(s+=r?" = ":"=",s+=this._printExpression(e.defaultValue,!1,!0)),s}_printExpression(e,t=!1,i=!1){return super._printExpression(e,t,i)}_printDecorators(e){let t="";return e.forEach((e=>{t+="@"+this._printExpression(e.expression)+"\n"})),t}}t.TypeStubExtendedWriter=u},7542:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ScipPyrightConfig=void 0;const o=r(i(5022)),a=r(i(1620)),l=i(1887),c=i(1252),u=i(2930),d=i(3584),h=i(3188),p=i(6657),m=["scip-pyrightconfig.json","pyrightconfig.json"];t.ScipPyrightConfig=class{constructor(e,t){this._console=console,this._typeCheckingMode="basic",this.fs=t,this._configOptions=new u.ConfigOptions(e.projectRoot),this._configOptions.checkOnlyOpenFiles=!1,this._configOptions.indexing=!0,this._configOptions.useLibraryCodeForTypes=!0}getConfigOptions(){const e=new d.FullAccessHost(this.fs),t=new c.CommandLineOptions(process.cwd(),!1);let i=this._getConfigOptions(e,t);return i.checkOnlyOpenFiles=!1,i.indexing=!0,i.useLibraryCodeForTypes=!0,i.typeshedPath=this._configOptions.typeshedPath||(0,l.getTypeShedFallbackPath)(this.fs),i}_getConfigOptions(e,t){var i,s;let n,r,o=t.executionRoot;t.configFilePath?(n=(0,p.combinePaths)(t.executionRoot,(0,p.normalizePath)(t.configFilePath)),this.fs.existsSync(n)?n.toLowerCase().endsWith(".json")?o=(0,p.getDirectoryPath)(n):(o=n,n=this._findConfigFile(n),n||this._console.info(`Configuration file not found at ${o}.`)):(this._console.info(`Configuration file not found at ${n}.`),n=t.executionRoot)):o&&(n=this._findConfigFile(o),n||t.fromVsCodeExtension||(n=this._findConfigFileHereOrUp(o)),n?o=(0,p.getDirectoryPath)(n):(this._console.log("No configuration file found."),n=void 0)),n||(r=this._findPyprojectTomlFile(o),r||t.fromVsCodeExtension||(r=this.findPyprojectTomlFileHereOrUp(o)),r?(o=(0,p.getDirectoryPath)(r),this._console.log(`pyproject.toml file found at ${o}.`)):this._console.log("No pyproject.toml file found."));const a=new u.ConfigOptions(o,this._typeCheckingMode),c=["**/node_modules","**/__pycache__","**/.*"];let d;if(t.pythonPath&&(a.pythonPath=t.pythonPath),a.defaultPythonPlatform=t.pythonPlatform,a.defaultPythonVersion=t.pythonVersion,a.ensureDefaultExtraPaths(this.fs,t.autoSearchPaths||!1,t.extraPaths),t.fileSpecs.length>0&&t.fileSpecs.forEach((e=>{a.include.push((0,p.getFileSpec)(this.fs,o,e))})),t.excludeFileSpecs.length>0&&t.excludeFileSpecs.forEach((e=>{a.exclude.push((0,p.getFileSpec)(this.fs,o,e))})),t.ignoreFileSpecs.length>0&&t.ignoreFileSpecs.forEach((e=>{a.ignore.push((0,p.getFileSpec)(this.fs,o,e))})),!n&&t.executionRoot&&(0===t.fileSpecs.length&&a.include.push((0,p.getFileSpec)(this.fs,t.executionRoot,".")),0===t.excludeFileSpecs.length&&c.forEach((e=>{a.exclude.push((0,p.getFileSpec)(this.fs,t.executionRoot,e))}))),this._configFilePath=n||r,n?(this._console.info(`Loading configuration file at ${n}`),d=this._parseJsonConfigFile(n)):r&&(this._console.info(`Loading pyproject.toml file at ${r}`),d=this._parsePyprojectTomlFile(r)),d){a.initializeFromJson(d,this._typeCheckingMode,this._console,this.fs,e,t.diagnosticSeverityOverrides,t.fileSpecs.length>0);const i=(0,p.getDirectoryPath)(this._configFilePath);0===a.include.length&&(this._console.info(`No include entries specified; assuming ${i}`),a.include.push((0,p.getFileSpec)(this.fs,i,"."))),0===a.exclude.length&&(c.forEach((e=>{this._console.info(`Auto-excluding ${e}`),a.exclude.push((0,p.getFileSpec)(this.fs,i,e))})),void 0===a.autoExcludeVenv&&(a.autoExcludeVenv=!0))}else a.autoExcludeVenv=!0,a.applyDiagnosticOverrides(t.diagnosticSeverityOverrides);void 0!==t.analyzeUnannotatedFunctions&&(a.diagnosticRuleSet.analyzeUnannotatedFunctions=t.analyzeUnannotatedFunctions);const m=(e,i)=>{const s=t.fromVsCodeExtension?"the client settings":"a command-line option";this._console.warn(`The ${e} has been specified in both the config file and ${s}. The value in the config file (${i}) will take precedence`)};if(t.venvPath&&(a.venvPath?m("venvPath",a.venvPath):a.venvPath=t.venvPath),t.typeshedPath&&(a.typeshedPath?m("typeshedPath",a.typeshedPath):a.typeshedPath=t.typeshedPath),a.verboseOutput=null!==(i=t.verboseOutput)&&void 0!==i?i:a.verboseOutput,a.checkOnlyOpenFiles=!!t.checkOnlyOpenFiles,a.autoImportCompletions=!!t.autoImportCompletions,a.indexing=!!t.indexing,a.taskListTokens=t.taskListTokens,a.logTypeEvaluationTime=!!t.logTypeEvaluationTime,a.typeEvaluationTimeThreshold=t.typeEvaluationTimeThreshold,void 0===a.useLibraryCodeForTypes?a.useLibraryCodeForTypes=!!t.useLibraryCodeForTypes:void 0!==t.useLibraryCodeForTypes&&m("useLibraryCodeForTypes",a.useLibraryCodeForTypes),t.stubPath&&(a.stubPath?m("stubPath",a.stubPath):a.stubPath=t.stubPath),a.stubPath?this.fs.existsSync(a.stubPath)&&(0,p.isDirectory)(this.fs,a.stubPath)||this._console.warn(`stubPath ${a.stubPath} is not a valid directory.`):a.stubPath=(0,p.normalizePath)((0,p.combinePaths)(a.projectRoot,h.defaultStubsDirectory)),a.venvPath&&(this.fs.existsSync(a.venvPath)&&(0,p.isDirectory)(this.fs,a.venvPath)||this._console.error(`venvPath ${a.venvPath} is not a valid directory.`),a.venv=null!==(s=a.venv)&&void 0!==s?s:this._configOptions.venv,a.venv)){const t=(0,p.combinePaths)(a.venvPath,a.venv);if(this.fs.existsSync(t)&&(0,p.isDirectory)(this.fs,t)){const t=[];void 0===(0,l.findPythonSearchPaths)(this.fs,a,e,t)&&(this._console.error(`site-packages directory cannot be located for venvPath ${a.venvPath} and venv ${a.venv}.`),a.verboseOutput&&t.forEach((e=>{this._console.error(`  ${e}`)})))}else this._console.error(`venv ${a.venv} subdirectory not found in venv path ${a.venvPath}.`)}return a.venv&&(a.venvPath||this._console.warn("venvPath not specified, so venv settings will be ignored.")),a.typeshedPath&&(this.fs.existsSync(a.typeshedPath)&&(0,p.isDirectory)(this.fs,a.typeshedPath)||this._console.error(`typeshedPath ${a.typeshedPath} is not a valid directory.`)),a}_findConfigFile(e){for(const t of m){const i=(0,p.combinePaths)(e,t);if(this.fs.existsSync(i))return i}}_findConfigFileHereOrUp(e){return(0,p.forEachAncestorDirectory)(e,(e=>this._findConfigFile(e)))}_findPyprojectTomlFile(e){const t=(0,p.combinePaths)(e,"pyproject.toml");if(this.fs.existsSync(t))return t}findPyprojectTomlFileHereOrUp(e){return(0,p.forEachAncestorDirectory)(e,(e=>this._findPyprojectTomlFile(e)))}_parseJsonConfigFile(e){return this._attemptParseFile(e,(e=>{const t=[],i=a.parse(e,t,{allowTrailingComma:!0});if(t.length>0)throw new Error("Errors parsing JSON file");return i}))}_attemptParseFile(e,t){let i="",s=0;for(;;){try{i=this.fs.readFileSync(e,"utf8")}catch{return void this._console.error(`Config file "${e}" could not be read.`)}let n=!1;try{return t(i,s+1)}catch(e){n=!0}if(!n)break;if(s++>=5)return void this._console.error(`Config file "${e}" could not be parsed. Verify that format is correct.`)}}_parsePyprojectTomlFile(e){return this._attemptParseFile(e,((t,i)=>{try{const e=o.parse(t);if(e&&e.tool&&e.tool.scip)return e.tool.scip;if(e&&e.tool&&e.tool.pyright)return e.tool.pyright}catch(e){throw this._console.error(`Pyproject file parse attempt ${i} error: ${JSON.stringify(e)}`),e}this._console.error(`Pyproject file "${e}" is missing "[tool.pyright]" section.`)}))}}},33:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stdlib_module_names=void 0,t.stdlib_module_names=new Set(["__future__","_abc","_aix_support","_ast","_asyncio","_bisect","_blake2","_bootsubprocess","_bz2","_codecs","_codecs_cn","_codecs_hk","_codecs_iso2022","_codecs_jp","_codecs_kr","_codecs_tw","_collections","_collections_abc","_compat_pickle","_compression","_contextvars","_crypt","_csv","_ctypes","_curses","_curses_panel","_datetime","_dbm","_decimal","_elementtree","_frozen_importlib","_frozen_importlib_external","_functools","_gdbm","_hashlib","_heapq","_imp","_io","_json","_locale","_lsprof","_lzma","_markupbase","_md5","_msi","_multibytecodec","_multiprocessing","_opcode","_operator","_osx_support","_overlapped","_pickle","_posixshmem","_posixsubprocess","_py_abc","_pydecimal","_pyio","_queue","_random","_scproxy","_sha1","_sha256","_sha3","_sha512","_signal","_sitebuiltins","_socket","_sqlite3","_sre","_ssl","_stat","_statistics","_string","_strptime","_struct","_symtable","_thread","_threading_local","_tkinter","_tracemalloc","_uuid","_warnings","_weakref","_weakrefset","_winapi","_zoneinfo","abc","aifc","antigravity","argparse","array","ast","asynchat","asyncio","asyncore","atexit","audioop","base64","bdb","binascii","binhex","bisect","builtins","bz2","cProfile","calendar","cgi","cgitb","chunk","cmath","cmd","code","codecs","codeop","collections","colorsys","compileall","concurrent","configparser","contextlib","contextvars","copy","copyreg","crypt","csv","ctypes","curses","dataclasses","datetime","dbm","decimal","difflib","dis","distutils","doctest","email","encodings","ensurepip","enum","errno","faulthandler","fcntl","filecmp","fileinput","fnmatch","fractions","ftplib","functools","gc","genericpath","getopt","getpass","gettext","glob","graphlib","grp","gzip","hashlib","heapq","hmac","html","http","idlelib","imaplib","imghdr","imp","importlib","inspect","io","ipaddress","itertools","json","keyword","lib2to3","linecache","locale","logging","lzma","mailbox","mailcap","marshal","math","mimetypes","mmap","modulefinder","msilib","msvcrt","multiprocessing","netrc","nis","nntplib","nt","ntpath","nturl2path","numbers","opcode","operator","optparse","os","ossaudiodev","pathlib","pdb","pickle","pickletools","pipes","pkgutil","platform","plistlib","poplib","posix","posixpath","pprint","profile","pstats","pty","pwd","py_compile","pyclbr","pydoc","pydoc_data","pyexpat","queue","quopri","random","re","readline","reprlib","resource","rlcompleter","runpy","sched","secrets","select","selectors","shelve","shlex","shutil","signal","site","smtpd","smtplib","sndhdr","socket","socketserver","spwd","sqlite3","sre_compile","sre_constants","sre_parse","ssl","stat","statistics","string","stringprep","struct","subprocess","sunau","symtable","sys","sysconfig","syslog","tabnanny","tarfile","telnetlib","tempfile","termios","textwrap","this","threading","time","timeit","tkinter","token","tokenize","trace","traceback","tracemalloc","tty","turtle","turtledemo","types","typing","unicodedata","unittest","urllib","uu","uuid","venv","warnings","wave","weakref","webbrowser","winreg","winsound","wsgiref","xdrlib","xml","xmlrpc","zipapp","zipfile","zipimport","zlib","zoneinfo"])},793:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Indexer=void 0;const a=r(i(2081)),l=r(i(1017)),c=r(i(5022)),u=i(6265),d=i(8408),h=i(2374),p=i(7720),m=i(3373),g=i(3584),f=r(i(7310)),y=i(4411),b=i(1447),_=o(i(3004)),v=i(4147),S=i(2410),w=i(3160),P=i(2464),k=i(7542),x=i(3466);class M{constructor(e){this.scipConfig=e,this.counter=new y.Counter;let t=new b.PyrightFileSystem((0,p.createFromRealFileSystem)()),i=new k.ScipPyrightConfig(e,t);if(this.pyrightConfig=i.getConfigOptions(),!e.projectName||!e.projectVersion){const{name:s,version:n}=M.inferProjectInfo(e.infer.projectVersionFromCommit,(()=>{const s=i.findPyprojectTomlFileHereOrUp(e.projectRoot);if(s)return t.readFileSync(s,"utf8")}));!e.projectName&&s&&(e.projectName=s),!e.projectVersion&&n&&(e.projectVersion=n)}const s=new S.FileMatcher(this.pyrightConfig,t);if(this.projectFiles=new Set(s.matchFiles(this.pyrightConfig.include,this.pyrightConfig.exclude)),e.targetOnly){e.targetOnly=l.resolve(e.targetOnly);const t=new Set;for(const i of this.projectFiles)i.startsWith(e.targetOnly)&&t.add(i);this.projectFiles=t}console.log("Total Project Files",this.projectFiles.size);const n=new g.FullAccessHost(t);this.importResolver=new h.ImportResolver(t,this.pyrightConfig,n),this.program=new d.Program(this.importResolver,this.pyrightConfig),this.program.setTrackedFiles([...this.projectFiles]),e.projectNamespace&&(0,x.setProjectNamespace)(e.projectName,this.scipConfig.projectNamespace)}static inferProjectInfo(e,t){let i,s;try{const e=t();if(e){const t=c.parse(e);let n=t.project;if(n&&(i=n.name,s=n.version),!i||!s){let e=t.tool;if(e){let t=e.poetry;t&&(i=null!=i?i:t.name,s=null!=s?s:t.version)}}}}catch(e){}if(i="string"==typeof i?i:void 0,s="string"==typeof s?s:void 0,!s&&e)try{s=a.execSync("git rev-parse HEAD").toString().trim()}catch(e){}return{name:i,version:s}}index(){const e={isCancellationRequested:!1,onCancellationRequested:u.Event.None};let t=0,i=()=>{try{return this.program.analyze({openFilesTimeInMs:1e4,noOpenFilesTimeInMs:1e4})}catch(e){return(0,w.sendStatus)(`  Analysis partially failed with (${t}/100): ${e}`),t++<100||((0,w.sendStatus)("  Cancelling analysis, but continuing to write index. Please file an issue"),!1)}};const s=e=>{for(;i();){const t=this.program.getFileCount()-this.program.getFilesToAnalyzeCount(),i=this.program.getFileCount();e.message(`${t} / ${i}`)}},n=(0,_.default)(this.projectFiles,this.scipConfig.projectVersion,this.scipConfig.environment),r=new Map;this.scipConfig.writeIndex(new P.scip.Index({metadata:new P.scip.Metadata({project_root:f.pathToFileURL(this.getProjectRoot()).toString(),text_document_encoding:P.scip.TextEncoding.UTF8,tool_info:new P.scip.ToolInfo({name:"scip-python",version:v.version,arguments:[]})})})),(0,w.withStatus)("Parse and search for dependencies",s);let o=[];(0,w.withStatus)("Index workspace and track project files",(()=>{this.program.indexWorkspace((e=>{if(0!=e.indexOf(this.scipConfig.projectRoot))return;const t=this.program.getSourceFile(e);o.push(t),t.getImports().forEach((e=>e.resolvedPaths.forEach((e=>{this.program.addTrackedFile(e,!0,!1)}))))}),e)})),o.forEach((e=>{e.markDirty(!0)})),(0,w.withStatus)("Analyze project and dependencies",s);let a=new Map;(0,w.withStatus)("Parse and emit SCIP",(e=>{const t=this.program.evaluator;o.forEach(((i,s)=>{e.progress(`(${s}/${o.length}): ${i.getFilePath()}`);const c=i.getFilePath();let u=new P.scip.Document({relative_path:l.relative(this.getProjectRoot(),c)});const d=i.getParseResults(),h=null==d?void 0:d.parseTree;let p=new m.TreeVisitor({document:u,externalSymbols:a,sourceFile:i,evaluator:t,program:this.program,pyrightConfig:this.pyrightConfig,scipConfig:this.scipConfig,pythonEnvironment:n,globalSymbols:r});try{p.walk(h)}catch(e){throw{currentFilepath:i.getFilePath(),error:e}}0!==u.occurrences.length?this.scipConfig.writeIndex(new P.scip.Index({documents:[u]})):console.log(`file:${c} had no occurrences`)}))})),(0,w.withStatus)("Writing external symbols to SCIP index",(()=>{const e=new P.scip.Index;e.external_symbols=Array.from(a.values()),this.scipConfig.writeIndex(e)})),(0,w.sendStatus)(`Sucessfully wrote SCIP index to ${this.scipConfig.output}`)}getProjectRoot(){return this.scipConfig.targetOnly&&""!==this.scipConfig.targetOnly?this.scipConfig.targetOnly:this.scipConfig.projectRoot}}t.Indexer=M},272:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.diffSnapshot=t.writeSnapshot=t.formatSnapshot=void 0;const o=i(9479),a=r(i(7147)),l=r(i(1017)),c=i(7282),u=i(2464),d=i(4754),h="scip-python python",p="# format-options:";function m(e,t){return d.Range.fromLsif(e.range).compare(d.Range.fromLsif(t.range))}function g(e,t){const i=e.range.compare(t.range);return 0!==i?i:t.range.end.line-e.range.end.line}t.formatSnapshot=function(e,t,i=[]){const s=[],n=function(e){let t=new Map;for(const i of e.symbols)t.set(i.symbol,i);return t}(t),r=new Map;for(let e of i)r.set(e.symbol,e);const o=[],a=new Set,l=function(e){const t={showDocs:!1,showRanges:!1};for(let i of e){if(!i.startsWith(p))continue;const e=i.slice(p.length).trim().split(",");for(let i of e){const e=i.trim();if(!(e in t))throw new Error(`Invalid format option: ${e}`);t[e]=!0}break}return t}(e.lines);for(let e of t.occurrences)(e.symbol_roles&u.scip.SymbolRole.Definition)>0&&a.add(e.symbol),l.showRanges&&e.enclosing_range.length>0&&o.push({range:d.Range.fromLsif(e.enclosing_range),symbol:e.symbol});o.sort(g);const c=Array.from(Array(e.lines.length),(()=>[])),f=Array.from(Array(e.lines.length),(()=>[]));for(const e of o)c[e.range.start.line].push(e),f[e.range.end.line].unshift(e);const y=new Set,b=(e,t,i,o)=>{if(y.has(t))return void s.push("\n");if(!i&&a.has(t))return void s.push("\n");y.add(t);let c="\n#";o||(c+=" ".repeat(e.start.character-1));const u=(e,t)=>{if(l.showDocs)for(const i of e)for(const[e,n]of i.split("\n").entries())s.push(c),0==e?(t&&s.push("external "),s.push("documentation ")):s.push("            > "),s.push(n.slice(0,40)),n.length>40&&s.push("...")},d=e=>{e.sort(((e,t)=>e.symbol.localeCompare(t.symbol)));for(const t of e)s.push(c),s.push("relationship"),t.is_implementation&&s.push(" implementation"),t.is_reference&&s.push(" reference"),t.is_type_definition&&s.push(" type_definition"),s.push(" "+t.symbol)},h=r.get(t);if(h)u(h.documentation,!0),d(h.relationships);else{const e=n.get(t);e&&(u(e.documentation,!1),d(e.relationships))}s.push("\n")},_=(e,t=!1)=>{l.showRanges&&(s.push("#"),s.push(" ".repeat(Math.max(1,e.range.start.character-1))),e.range.start.character<2?s.push("<"):t?s.push("^"):s.push("âŒ„"),t?s.push(" end "):s.push(" start "),s.push("enclosing_range "),s.push(e.symbol),s.push("\n"))};t.occurrences.sort(m);let v=0;for(const[i,n]of e.lines.entries()){if(0==v){const e=t.occurrences[v],i=d.Range.fromLsif(e.range);if(0==i.start.character&&0==i.end.character){const t=(e.symbol_roles&u.scip.SymbolRole.Definition)>0;s.push("#"),s.push(" < "),s.push(t?"definition":"reference"),s.push(" "),s.push(e.symbol),b(i,e.symbol,t,!0),s.push("\n"),v++}}for(const e of c[i])_(e);for(s.push(""),s.push(n),s.push("\n");v<t.occurrences.length&&t.occurrences[v].range[0]===i;){const i=t.occurrences[v];if(v++,void 0===i.symbol)continue;if(i.range.length>3)throw"not yet implemented, multi-line ranges";const n=d.Range.fromLsif(i.range);s.push("#");const r=0==n.start.character;r||s.push(" ".repeat(n.start.character-1));let o=0;r&&(o=1);const a=n.end.character-n.start.character-o;if(a<0)throw new Error(e.format(n,"negative length occurrence!"));s.push("^".repeat(a)),s.push(" ");const l=(i.symbol_roles&u.scip.SymbolRole.Definition)>0;s.push(l?"definition":"reference"),s.push(" ");const c=i.symbol.startsWith(h)?i.symbol.slice(h.length):i.symbol;s.push(c.replace("\n","|")),b(n,i.symbol,l,r)}for(const e of f[i])_(e,!0)}return s.join("")},t.writeSnapshot=function(e,t){a.mkdirSync(l.dirname(e),{recursive:!0}),a.writeFileSync(e,t,{flag:"w"})},t.diffSnapshot=function(e,t){let i=a.readFileSync(e,{encoding:"utf8"});t!==i&&(console.error((0,o.createTwoFilesPatch)(e,e,i,t,"(what the snapshot tests expect)",'(what the current code produces). Run the command "npm run update-snapshots" to accept the new behavior.')),(0,c.exit)(1))}},4411:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Counter=void 0,t.Counter=class{constructor(){this.n=-1}next(){return this.n++,this.n}}},2698:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.descriptorString=t.typeParameterDescriptor=t.parameterDescriptor=t.methodDescriptor=t.metaDescriptor=t.termDescriptor=t.typeDescriptor=t.packageDescriptor=void 0;const s=i(2464),n=s.scip.Descriptor,r=s.scip.Descriptor.Suffix;function o(e){return e.name?(t=e.name,/^[\w$+-]+$/i.test(t)?e.name:"`"+e.name.replace(/`/g,"``")+"`"):"";var t}t.packageDescriptor=function(e){return new n({name:e,suffix:r.Package})},t.typeDescriptor=function(e){return new n({name:e,suffix:r.Type})},t.termDescriptor=function(e){return new n({name:e,suffix:r.Term})},t.metaDescriptor=function(e){return new n({name:e,suffix:r.Meta})},t.methodDescriptor=function(e){return new n({name:e,suffix:r.Method})},t.parameterDescriptor=function(e){return new n({name:e,suffix:r.Parameter})},t.typeParameterDescriptor=function(e){return new n({name:e,suffix:r.TypeParameter})},t.descriptorString=function(e){switch(e.suffix){case r.Package:return o(e)+"/";case r.Type:return o(e)+"#";case r.Term:return o(e)+".";case r.Meta:return o(e)+":";case r.Method:return o(e)+"("+(e.disambiguator||"")+").";case r.Parameter:return"("+o(e)+")";case r.TypeParameter:return"["+o(e)+"]";default:throw new Error(`unknown descriptor suffix: ${e.suffix}`)}}},9071:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;const o=r(i(7147));class a{constructor(e,t){this.path=e,this.text=t,this.lines=t.split("\n")}static fromFile(e){return new a(e,o.readFileSync(e).toString())}format(e,t){const i=this.lines[e.start.line],s=" ".repeat(e.start.character),n=e.isSingleLine()?e.end.character-e.start.character:i.length-e.start.character,r=n<0?"<negative length>":"^".repeat(n),o=e.isSingleLine()?"":` ${e.end.line}:${e.end.character}`,a=t?" "+t:"";return`${this.path}:${e.start.line}:${e.start.character}${a}\n${i}\n${s}${r}${o}`}log(e){console.log(this.format(e))}}t.Input=a},3309:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LsifSymbol=void 0;const s=i(2698);class n{constructor(e){this.value=e}isEmpty(){return""===this.value}isLocal(){return this.value.startsWith("local ")}static local(e){return new n(`local ${e}`)}static empty(){return new n("")}static package(e,t){return new n(`lsif-typescript npm ${e} ${t} `)}static global(e,t){return new n(e.value+(0,s.descriptorString)(t))}}t.LsifSymbol=n},7349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Position=void 0,t.Position=class{constructor(e,t){this.line=e,this.character=t}compare(e){return this.line!==e.line?this.line-e.line:this.character-e.character}}},4754:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Range=void 0;const s=i(7349);class n{constructor(e,t){this.start=e,this.end=t}compare(e){const t=this.start.compare(e.start);return 0!==t?t:this.end.compare(e.end)}toLsif(){return this.isSingleLine()?[this.start.line,this.start.character,this.end.character]:[this.start.line,this.start.character,this.end.line,this.end.character]}static fromLsif(e){const t=3===e.length?e[0]:e[2],i=3===e.length?e[2]:e[3];return new n(new s.Position(e[0],e[1]),new s.Position(t,i))}static fromNode(e){const t=e.getSourceFile(),i=t.getLineAndCharacterOfPosition(e.getStart()),r=t.getLineAndCharacterOfPosition(e.getEnd());return new n(new s.Position(i.line,i.character),new s.Position(r.line,r.character))}isSingleLine(){return this.start.line===this.end.line}}t.Range=n},7051:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.main=void 0;const o=r(i(7147)),a=r(i(1017)),l=i(2464),c=i(272),u=i(9071),d=i(1017),h=i(714),p=i(3160),m=i(793),g=i(7282);function f(e){var t;(0,p.setQuiet)(e.quiet),void 0!==e.showProgressRateLimit&&(0,p.setShowProgressRateLimit)(e.showProgressRateLimit);const i=e.cwd,s=e.environment,n=process.cwd();process.chdir(i);const r=a.isAbsolute(e.output)?e.output:a.join(i,e.output),l=o.openSync(r,"w");try{let n=new m.Indexer({...e,projectRoot:i,environment:s,infer:null!==(t=e.infer)&&void 0!==t?t:{projectVersionFromCommit:!0},writeIndex:e=>{o.writeSync(l,e.serializeBinary())}});(0,p.sendStatus)(`Indexing ${i} with version ${n.scipConfig.projectVersion}`),n.index()}catch(e){console.warn("\n\nExperienced Fatal Error While Indexing:\nPlease create an issue at github.com/sourcegraph/scip-python:",e),process.chdir(n),(0,g.exit)(1)}o.close(l),process.chdir(n)}function y(e,t){const i=t.only,s=a.resolve((0,d.join)(e,"input")),n=a.resolve((0,d.join)(e,"output"));let r=o.readdirSync(s);i&&(console.assert(void 0!==r.find((e=>e===i))),r=[i]);for(const e of r){let i=(0,d.join)(s,e);console.assert(o.lstatSync(i).isDirectory()),console.log(`Output path = ${t.output}`),f({projectName:t.projectName,projectVersion:t.projectVersion,projectNamespace:t.projectNamespace,environment:t.environment?a.resolve(t.environment):void 0,dev:t.dev,output:a.join(i,t.output),cwd:i,targetOnly:t.targetOnly,infer:{projectVersionFromCommit:!1},quiet:t.quiet,showProgressRateLimit:void 0});const r=a.join(i,t.output),h=l.scip.Index.deserializeBinary(o.readFileSync(r));for(const s of h.documents){if(s.relative_path.startsWith(".."))continue;const r=a.join(i,s.relative_path),o=u.Input.fromFile(r),l=(0,c.formatSnapshot)(o,s,h.external_symbols),d=a.relative(i,r),p=a.resolve(n,e,d);t.check?(0,c.diffSnapshot)(p,l):(0,c.writeSnapshot)(p,l)}}}t.main=function(e){(0,h.mainCommand)(f,y,(e=>{throw"not yet implemented"})).parse(e)}},6608:(e,t,i)=>{(0,i(7051).main)(process.argv)},2464:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},o=this&&this.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.scip=void 0;const a=r(i(3019));!function(e){var t,i,s,n,r,l,c,u,d,h,p;let m,g,f,y,b,_,v;!function(e){e[e.UnspecifiedProtocolVersion=0]="UnspecifiedProtocolVersion"}(m=e.ProtocolVersion||(e.ProtocolVersion={})),function(e){e[e.UnspecifiedTextEncoding=0]="UnspecifiedTextEncoding",e[e.UTF8=1]="UTF8",e[e.UTF16=2]="UTF16"}(g=e.TextEncoding||(e.TextEncoding={})),function(e){e[e.UnspecifiedSymbolRole=0]="UnspecifiedSymbolRole",e[e.Definition=1]="Definition",e[e.Import=2]="Import",e[e.WriteAccess=4]="WriteAccess",e[e.ReadAccess=8]="ReadAccess",e[e.Generated=16]="Generated",e[e.Test=32]="Test",e[e.ForwardDefinition=64]="ForwardDefinition"}(f=e.SymbolRole||(e.SymbolRole={})),function(e){e[e.UnspecifiedSyntaxKind=0]="UnspecifiedSyntaxKind",e[e.Comment=1]="Comment",e[e.PunctuationDelimiter=2]="PunctuationDelimiter",e[e.PunctuationBracket=3]="PunctuationBracket",e[e.Keyword=4]="Keyword",e[e.IdentifierKeyword=4]="IdentifierKeyword",e[e.IdentifierOperator=5]="IdentifierOperator",e[e.Identifier=6]="Identifier",e[e.IdentifierBuiltin=7]="IdentifierBuiltin",e[e.IdentifierNull=8]="IdentifierNull",e[e.IdentifierConstant=9]="IdentifierConstant",e[e.IdentifierMutableGlobal=10]="IdentifierMutableGlobal",e[e.IdentifierParameter=11]="IdentifierParameter",e[e.IdentifierLocal=12]="IdentifierLocal",e[e.IdentifierShadowed=13]="IdentifierShadowed",e[e.IdentifierNamespace=14]="IdentifierNamespace",e[e.IdentifierModule=14]="IdentifierModule",e[e.IdentifierFunction=15]="IdentifierFunction",e[e.IdentifierFunctionDefinition=16]="IdentifierFunctionDefinition",e[e.IdentifierMacro=17]="IdentifierMacro",e[e.IdentifierMacroDefinition=18]="IdentifierMacroDefinition",e[e.IdentifierType=19]="IdentifierType",e[e.IdentifierBuiltinType=20]="IdentifierBuiltinType",e[e.IdentifierAttribute=21]="IdentifierAttribute",e[e.RegexEscape=22]="RegexEscape",e[e.RegexRepeated=23]="RegexRepeated",e[e.RegexWildcard=24]="RegexWildcard",e[e.RegexDelimiter=25]="RegexDelimiter",e[e.RegexJoin=26]="RegexJoin",e[e.StringLiteral=27]="StringLiteral",e[e.StringLiteralEscape=28]="StringLiteralEscape",e[e.StringLiteralSpecial=29]="StringLiteralSpecial",e[e.StringLiteralKey=30]="StringLiteralKey",e[e.CharacterLiteral=31]="CharacterLiteral",e[e.NumericLiteral=32]="NumericLiteral",e[e.BooleanLiteral=33]="BooleanLiteral",e[e.Tag=34]="Tag",e[e.TagAttribute=35]="TagAttribute",e[e.TagDelimiter=36]="TagDelimiter"}(y=e.SyntaxKind||(e.SyntaxKind={})),function(e){e[e.UnspecifiedSeverity=0]="UnspecifiedSeverity",e[e.Error=1]="Error",e[e.Warning=2]="Warning",e[e.Information=3]="Information",e[e.Hint=4]="Hint"}(b=e.Severity||(e.Severity={})),function(e){e[e.UnspecifiedDiagnosticTag=0]="UnspecifiedDiagnosticTag",e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"}(_=e.DiagnosticTag||(e.DiagnosticTag={})),function(e){e[e.UnspecifiedLanguage=0]="UnspecifiedLanguage",e[e.ABAP=60]="ABAP",e[e.Apex=96]="Apex",e[e.APL=49]="APL",e[e.Ada=39]="Ada",e[e.Agda=45]="Agda",e[e.AsciiDoc=86]="AsciiDoc",e[e.Assembly=58]="Assembly",e[e.Awk=66]="Awk",e[e.Bat=68]="Bat",e[e.BibTeX=81]="BibTeX",e[e.C=34]="C",e[e.COBOL=59]="COBOL",e[e.CPP=35]="CPP",e[e.CSS=26]="CSS",e[e.CSharp=1]="CSharp",e[e.Clojure=8]="Clojure",e[e.Coffeescript=21]="Coffeescript",e[e.CommonLisp=9]="CommonLisp",e[e.Coq=47]="Coq",e[e.CUDA=97]="CUDA",e[e.Dart=3]="Dart",e[e.Delphi=57]="Delphi",e[e.Diff=88]="Diff",e[e.Dockerfile=80]="Dockerfile",e[e.Dyalog=50]="Dyalog",e[e.Elixir=17]="Elixir",e[e.Erlang=18]="Erlang",e[e.FSharp=42]="FSharp",e[e.Fish=65]="Fish",e[e.Flow=24]="Flow",e[e.Fortran=56]="Fortran",e[e.Git_Commit=91]="Git_Commit",e[e.Git_Config=89]="Git_Config",e[e.Git_Rebase=92]="Git_Rebase",e[e.Go=33]="Go",e[e.GraphQL=98]="GraphQL",e[e.Groovy=7]="Groovy",e[e.HTML=30]="HTML",e[e.Hack=20]="Hack",e[e.Handlebars=90]="Handlebars",e[e.Haskell=44]="Haskell",e[e.Idris=46]="Idris",e[e.Ini=72]="Ini",e[e.J=51]="J",e[e.JSON=75]="JSON",e[e.Java=6]="Java",e[e.JavaScript=22]="JavaScript",e[e.JavaScriptReact=93]="JavaScriptReact",e[e.Jsonnet=76]="Jsonnet",e[e.Julia=55]="Julia",e[e.Justfile=109]="Justfile",e[e.Kotlin=4]="Kotlin",e[e.LaTeX=83]="LaTeX",e[e.Lean=48]="Lean",e[e.Less=27]="Less",e[e.Lua=12]="Lua",e[e.Luau=108]="Luau",e[e.Makefile=79]="Makefile",e[e.Markdown=84]="Markdown",e[e.Matlab=52]="Matlab",e[e.Nickel=110]="Nickel",e[e.Nix=77]="Nix",e[e.OCaml=41]="OCaml",e[e.Objective_C=36]="Objective_C",e[e.Objective_CPP=37]="Objective_CPP",e[e.Pascal=99]="Pascal",e[e.PHP=19]="PHP",e[e.PLSQL=70]="PLSQL",e[e.Perl=13]="Perl",e[e.PowerShell=67]="PowerShell",e[e.Prolog=71]="Prolog",e[e.Protobuf=100]="Protobuf",e[e.Python=15]="Python",e[e.R=54]="R",e[e.Racket=11]="Racket",e[e.Raku=14]="Raku",e[e.Razor=62]="Razor",e[e.Repro=102]="Repro",e[e.ReST=85]="ReST",e[e.Ruby=16]="Ruby",e[e.Rust=40]="Rust",e[e.SAS=61]="SAS",e[e.SCSS=29]="SCSS",e[e.SML=43]="SML",e[e.SQL=69]="SQL",e[e.Sass=28]="Sass",e[e.Scala=5]="Scala",e[e.Scheme=10]="Scheme",e[e.ShellScript=64]="ShellScript",e[e.Skylark=78]="Skylark",e[e.Slang=107]="Slang",e[e.Solidity=95]="Solidity",e[e.Svelte=106]="Svelte",e[e.Swift=2]="Swift",e[e.Tcl=101]="Tcl",e[e.TOML=73]="TOML",e[e.TeX=82]="TeX",e[e.Thrift=103]="Thrift",e[e.TypeScript=23]="TypeScript",e[e.TypeScriptReact=94]="TypeScriptReact",e[e.Verilog=104]="Verilog",e[e.VHDL=105]="VHDL",e[e.VisualBasic=63]="VisualBasic",e[e.Vue=25]="Vue",e[e.Wolfram=53]="Wolfram",e[e.XML=31]="XML",e[e.XSL=32]="XSL",e[e.YAML=74]="YAML",e[e.Zig=38]="Zig"}(v=e.Language||(e.Language={}));class S extends a.Message{constructor(e){super(),t.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[2,3],o(this,t,"f")),Array.isArray(e)||"object"!=typeof e||("metadata"in e&&null!=e.metadata&&(this.metadata=e.metadata),"documents"in e&&null!=e.documents&&(this.documents=e.documents),"external_symbols"in e&&null!=e.external_symbols&&(this.external_symbols=e.external_symbols))}get metadata(){return a.Message.getWrapperField(this,w,1)}set metadata(e){a.Message.setWrapperField(this,1,e)}get has_metadata(){return null!=a.Message.getField(this,1)}get documents(){return a.Message.getRepeatedWrapperField(this,k,2)}set documents(e){a.Message.setRepeatedWrapperField(this,2,e)}get external_symbols(){return a.Message.getRepeatedWrapperField(this,T,3)}set external_symbols(e){a.Message.setRepeatedWrapperField(this,3,e)}static fromObject(e){const t=new S({});return null!=e.metadata&&(t.metadata=w.fromObject(e.metadata)),null!=e.documents&&(t.documents=e.documents.map((e=>k.fromObject(e)))),null!=e.external_symbols&&(t.external_symbols=e.external_symbols.map((e=>T.fromObject(e)))),t}toObject(){const e={};return null!=this.metadata&&(e.metadata=this.metadata.toObject()),null!=this.documents&&(e.documents=this.documents.map((e=>e.toObject()))),null!=this.external_symbols&&(e.external_symbols=this.external_symbols.map((e=>e.toObject()))),e}serialize(e){const t=e||new a.BinaryWriter;if(this.has_metadata&&t.writeMessage(1,this.metadata,(()=>this.metadata.serialize(t))),this.documents.length&&t.writeRepeatedMessage(2,this.documents,(e=>e.serialize(t))),this.external_symbols.length&&t.writeRepeatedMessage(3,this.external_symbols,(e=>e.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new S;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:t.readMessage(i.metadata,(()=>i.metadata=w.deserialize(t)));break;case 2:t.readMessage(i.documents,(()=>a.Message.addToRepeatedWrapperField(i,2,k.deserialize(t),k)));break;case 3:t.readMessage(i.external_symbols,(()=>a.Message.addToRepeatedWrapperField(i,3,T.deserialize(t),T)));break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return S.deserialize(e)}}t=new WeakMap,e.Index=S;class w extends a.Message{constructor(e){super(),i.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],o(this,i,"f")),Array.isArray(e)||"object"!=typeof e||("version"in e&&null!=e.version&&(this.version=e.version),"tool_info"in e&&null!=e.tool_info&&(this.tool_info=e.tool_info),"project_root"in e&&null!=e.project_root&&(this.project_root=e.project_root),"text_document_encoding"in e&&null!=e.text_document_encoding&&(this.text_document_encoding=e.text_document_encoding))}get version(){return a.Message.getFieldWithDefault(this,1,m.UnspecifiedProtocolVersion)}set version(e){a.Message.setField(this,1,e)}get tool_info(){return a.Message.getWrapperField(this,P,2)}set tool_info(e){a.Message.setWrapperField(this,2,e)}get has_tool_info(){return null!=a.Message.getField(this,2)}get project_root(){return a.Message.getFieldWithDefault(this,3,"")}set project_root(e){a.Message.setField(this,3,e)}get text_document_encoding(){return a.Message.getFieldWithDefault(this,4,g.UnspecifiedTextEncoding)}set text_document_encoding(e){a.Message.setField(this,4,e)}static fromObject(e){const t=new w({});return null!=e.version&&(t.version=e.version),null!=e.tool_info&&(t.tool_info=P.fromObject(e.tool_info)),null!=e.project_root&&(t.project_root=e.project_root),null!=e.text_document_encoding&&(t.text_document_encoding=e.text_document_encoding),t}toObject(){const e={};return null!=this.version&&(e.version=this.version),null!=this.tool_info&&(e.tool_info=this.tool_info.toObject()),null!=this.project_root&&(e.project_root=this.project_root),null!=this.text_document_encoding&&(e.text_document_encoding=this.text_document_encoding),e}serialize(e){const t=e||new a.BinaryWriter;if(this.version!=m.UnspecifiedProtocolVersion&&t.writeEnum(1,this.version),this.has_tool_info&&t.writeMessage(2,this.tool_info,(()=>this.tool_info.serialize(t))),this.project_root.length&&t.writeString(3,this.project_root),this.text_document_encoding!=g.UnspecifiedTextEncoding&&t.writeEnum(4,this.text_document_encoding),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new w;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:i.version=t.readEnum();break;case 2:t.readMessage(i.tool_info,(()=>i.tool_info=P.deserialize(t)));break;case 3:i.project_root=t.readString();break;case 4:i.text_document_encoding=t.readEnum();break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return w.deserialize(e)}}i=new WeakMap,e.Metadata=w;class P extends a.Message{constructor(e){super(),s.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[3],o(this,s,"f")),Array.isArray(e)||"object"!=typeof e||("name"in e&&null!=e.name&&(this.name=e.name),"version"in e&&null!=e.version&&(this.version=e.version),"arguments"in e&&null!=e.arguments&&(this.arguments=e.arguments))}get name(){return a.Message.getFieldWithDefault(this,1,"")}set name(e){a.Message.setField(this,1,e)}get version(){return a.Message.getFieldWithDefault(this,2,"")}set version(e){a.Message.setField(this,2,e)}get arguments(){return a.Message.getFieldWithDefault(this,3,[])}set arguments(e){a.Message.setField(this,3,e)}static fromObject(e){const t=new P({});return null!=e.name&&(t.name=e.name),null!=e.version&&(t.version=e.version),null!=e.arguments&&(t.arguments=e.arguments),t}toObject(){const e={};return null!=this.name&&(e.name=this.name),null!=this.version&&(e.version=this.version),null!=this.arguments&&(e.arguments=this.arguments),e}serialize(e){const t=e||new a.BinaryWriter;if(this.name.length&&t.writeString(1,this.name),this.version.length&&t.writeString(2,this.version),this.arguments.length&&t.writeRepeatedString(3,this.arguments),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new P;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:i.name=t.readString();break;case 2:i.version=t.readString();break;case 3:a.Message.addToRepeatedField(i,3,t.readString());break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return P.deserialize(e)}}s=new WeakMap,e.ToolInfo=P;class k extends a.Message{constructor(e){super(),n.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[2,3],o(this,n,"f")),Array.isArray(e)||"object"!=typeof e||("language"in e&&null!=e.language&&(this.language=e.language),"relative_path"in e&&null!=e.relative_path&&(this.relative_path=e.relative_path),"occurrences"in e&&null!=e.occurrences&&(this.occurrences=e.occurrences),"symbols"in e&&null!=e.symbols&&(this.symbols=e.symbols),"text"in e&&null!=e.text&&(this.text=e.text))}get language(){return a.Message.getFieldWithDefault(this,4,"")}set language(e){a.Message.setField(this,4,e)}get relative_path(){return a.Message.getFieldWithDefault(this,1,"")}set relative_path(e){a.Message.setField(this,1,e)}get occurrences(){return a.Message.getRepeatedWrapperField(this,j,2)}set occurrences(e){a.Message.setRepeatedWrapperField(this,2,e)}get symbols(){return a.Message.getRepeatedWrapperField(this,T,3)}set symbols(e){a.Message.setRepeatedWrapperField(this,3,e)}get text(){return a.Message.getFieldWithDefault(this,5,"")}set text(e){a.Message.setField(this,5,e)}static fromObject(e){const t=new k({});return null!=e.language&&(t.language=e.language),null!=e.relative_path&&(t.relative_path=e.relative_path),null!=e.occurrences&&(t.occurrences=e.occurrences.map((e=>j.fromObject(e)))),null!=e.symbols&&(t.symbols=e.symbols.map((e=>T.fromObject(e)))),null!=e.text&&(t.text=e.text),t}toObject(){const e={};return null!=this.language&&(e.language=this.language),null!=this.relative_path&&(e.relative_path=this.relative_path),null!=this.occurrences&&(e.occurrences=this.occurrences.map((e=>e.toObject()))),null!=this.symbols&&(e.symbols=this.symbols.map((e=>e.toObject()))),null!=this.text&&(e.text=this.text),e}serialize(e){const t=e||new a.BinaryWriter;if(this.language.length&&t.writeString(4,this.language),this.relative_path.length&&t.writeString(1,this.relative_path),this.occurrences.length&&t.writeRepeatedMessage(2,this.occurrences,(e=>e.serialize(t))),this.symbols.length&&t.writeRepeatedMessage(3,this.symbols,(e=>e.serialize(t))),this.text.length&&t.writeString(5,this.text),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new k;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 4:i.language=t.readString();break;case 1:i.relative_path=t.readString();break;case 2:t.readMessage(i.occurrences,(()=>a.Message.addToRepeatedWrapperField(i,2,j.deserialize(t),j)));break;case 3:t.readMessage(i.symbols,(()=>a.Message.addToRepeatedWrapperField(i,3,T.deserialize(t),T)));break;case 5:i.text=t.readString();break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return k.deserialize(e)}}n=new WeakMap,e.Document=k;class x extends a.Message{constructor(e){super(),r.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[3],o(this,r,"f")),Array.isArray(e)||"object"!=typeof e||("scheme"in e&&null!=e.scheme&&(this.scheme=e.scheme),"package"in e&&null!=e.package&&(this.package=e.package),"descriptors"in e&&null!=e.descriptors&&(this.descriptors=e.descriptors))}get scheme(){return a.Message.getFieldWithDefault(this,1,"")}set scheme(e){a.Message.setField(this,1,e)}get package(){return a.Message.getWrapperField(this,M,2)}set package(e){a.Message.setWrapperField(this,2,e)}get has_package(){return null!=a.Message.getField(this,2)}get descriptors(){return a.Message.getRepeatedWrapperField(this,F,3)}set descriptors(e){a.Message.setRepeatedWrapperField(this,3,e)}static fromObject(e){const t=new x({});return null!=e.scheme&&(t.scheme=e.scheme),null!=e.package&&(t.package=M.fromObject(e.package)),null!=e.descriptors&&(t.descriptors=e.descriptors.map((e=>F.fromObject(e)))),t}toObject(){const e={};return null!=this.scheme&&(e.scheme=this.scheme),null!=this.package&&(e.package=this.package.toObject()),null!=this.descriptors&&(e.descriptors=this.descriptors.map((e=>e.toObject()))),e}serialize(e){const t=e||new a.BinaryWriter;if(this.scheme.length&&t.writeString(1,this.scheme),this.has_package&&t.writeMessage(2,this.package,(()=>this.package.serialize(t))),this.descriptors.length&&t.writeRepeatedMessage(3,this.descriptors,(e=>e.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new x;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:i.scheme=t.readString();break;case 2:t.readMessage(i.package,(()=>i.package=M.deserialize(t)));break;case 3:t.readMessage(i.descriptors,(()=>a.Message.addToRepeatedWrapperField(i,3,F.deserialize(t),F)));break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return x.deserialize(e)}}r=new WeakMap,e.Symbol=x;class M extends a.Message{constructor(e){super(),l.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],o(this,l,"f")),Array.isArray(e)||"object"!=typeof e||("manager"in e&&null!=e.manager&&(this.manager=e.manager),"name"in e&&null!=e.name&&(this.name=e.name),"version"in e&&null!=e.version&&(this.version=e.version))}get manager(){return a.Message.getFieldWithDefault(this,1,"")}set manager(e){a.Message.setField(this,1,e)}get name(){return a.Message.getFieldWithDefault(this,2,"")}set name(e){a.Message.setField(this,2,e)}get version(){return a.Message.getFieldWithDefault(this,3,"")}set version(e){a.Message.setField(this,3,e)}static fromObject(e){const t=new M({});return null!=e.manager&&(t.manager=e.manager),null!=e.name&&(t.name=e.name),null!=e.version&&(t.version=e.version),t}toObject(){const e={};return null!=this.manager&&(e.manager=this.manager),null!=this.name&&(e.name=this.name),null!=this.version&&(e.version=this.version),e}serialize(e){const t=e||new a.BinaryWriter;if(this.manager.length&&t.writeString(1,this.manager),this.name.length&&t.writeString(2,this.name),this.version.length&&t.writeString(3,this.version),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new M;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:i.manager=t.readString();break;case 2:i.name=t.readString();break;case 3:i.version=t.readString();break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return M.deserialize(e)}}l=new WeakMap,e.Package=M;class F extends a.Message{constructor(e){super(),c.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],o(this,c,"f")),Array.isArray(e)||"object"!=typeof e||("name"in e&&null!=e.name&&(this.name=e.name),"disambiguator"in e&&null!=e.disambiguator&&(this.disambiguator=e.disambiguator),"suffix"in e&&null!=e.suffix&&(this.suffix=e.suffix))}get name(){return a.Message.getFieldWithDefault(this,1,"")}set name(e){a.Message.setField(this,1,e)}get disambiguator(){return a.Message.getFieldWithDefault(this,2,"")}set disambiguator(e){a.Message.setField(this,2,e)}get suffix(){return a.Message.getFieldWithDefault(this,3,F.Suffix.UnspecifiedSuffix)}set suffix(e){a.Message.setField(this,3,e)}static fromObject(e){const t=new F({});return null!=e.name&&(t.name=e.name),null!=e.disambiguator&&(t.disambiguator=e.disambiguator),null!=e.suffix&&(t.suffix=e.suffix),t}toObject(){const e={};return null!=this.name&&(e.name=this.name),null!=this.disambiguator&&(e.disambiguator=this.disambiguator),null!=this.suffix&&(e.suffix=this.suffix),e}serialize(e){const t=e||new a.BinaryWriter;if(this.name.length&&t.writeString(1,this.name),this.disambiguator.length&&t.writeString(2,this.disambiguator),this.suffix!=F.Suffix.UnspecifiedSuffix&&t.writeEnum(3,this.suffix),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new F;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:i.name=t.readString();break;case 2:i.disambiguator=t.readString();break;case 3:i.suffix=t.readEnum();break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return F.deserialize(e)}}c=new WeakMap,e.Descriptor=F,function(e){let t;!function(e){e[e.UnspecifiedSuffix=0]="UnspecifiedSuffix",e[e.Namespace=1]="Namespace",e[e.Package=1]="Package",e[e.Type=2]="Type",e[e.Term=3]="Term",e[e.Method=4]="Method",e[e.TypeParameter=5]="TypeParameter",e[e.Parameter=6]="Parameter",e[e.Meta=7]="Meta",e[e.Local=8]="Local",e[e.Macro=9]="Macro"}(t=e.Suffix||(e.Suffix={}))}(F=e.Descriptor||(e.Descriptor={}));class T extends a.Message{constructor(e){super(),u.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[3,4],o(this,u,"f")),Array.isArray(e)||"object"!=typeof e||("symbol"in e&&null!=e.symbol&&(this.symbol=e.symbol),"documentation"in e&&null!=e.documentation&&(this.documentation=e.documentation),"relationships"in e&&null!=e.relationships&&(this.relationships=e.relationships),"kind"in e&&null!=e.kind&&(this.kind=e.kind),"display_name"in e&&null!=e.display_name&&(this.display_name=e.display_name),"signature_documentation"in e&&null!=e.signature_documentation&&(this.signature_documentation=e.signature_documentation),"enclosing_symbol"in e&&null!=e.enclosing_symbol&&(this.enclosing_symbol=e.enclosing_symbol))}get symbol(){return a.Message.getFieldWithDefault(this,1,"")}set symbol(e){a.Message.setField(this,1,e)}get documentation(){return a.Message.getFieldWithDefault(this,3,[])}set documentation(e){a.Message.setField(this,3,e)}get relationships(){return a.Message.getRepeatedWrapperField(this,O,4)}set relationships(e){a.Message.setRepeatedWrapperField(this,4,e)}get kind(){return a.Message.getFieldWithDefault(this,5,T.Kind.UnspecifiedKind)}set kind(e){a.Message.setField(this,5,e)}get display_name(){return a.Message.getFieldWithDefault(this,6,"")}set display_name(e){a.Message.setField(this,6,e)}get signature_documentation(){return a.Message.getWrapperField(this,k,7)}set signature_documentation(e){a.Message.setWrapperField(this,7,e)}get has_signature_documentation(){return null!=a.Message.getField(this,7)}get enclosing_symbol(){return a.Message.getFieldWithDefault(this,8,"")}set enclosing_symbol(e){a.Message.setField(this,8,e)}static fromObject(e){const t=new T({});return null!=e.symbol&&(t.symbol=e.symbol),null!=e.documentation&&(t.documentation=e.documentation),null!=e.relationships&&(t.relationships=e.relationships.map((e=>O.fromObject(e)))),null!=e.kind&&(t.kind=e.kind),null!=e.display_name&&(t.display_name=e.display_name),null!=e.signature_documentation&&(t.signature_documentation=k.fromObject(e.signature_documentation)),null!=e.enclosing_symbol&&(t.enclosing_symbol=e.enclosing_symbol),t}toObject(){const e={};return null!=this.symbol&&(e.symbol=this.symbol),null!=this.documentation&&(e.documentation=this.documentation),null!=this.relationships&&(e.relationships=this.relationships.map((e=>e.toObject()))),null!=this.kind&&(e.kind=this.kind),null!=this.display_name&&(e.display_name=this.display_name),null!=this.signature_documentation&&(e.signature_documentation=this.signature_documentation.toObject()),null!=this.enclosing_symbol&&(e.enclosing_symbol=this.enclosing_symbol),e}serialize(e){const t=e||new a.BinaryWriter;if(this.symbol.length&&t.writeString(1,this.symbol),this.documentation.length&&t.writeRepeatedString(3,this.documentation),this.relationships.length&&t.writeRepeatedMessage(4,this.relationships,(e=>e.serialize(t))),this.kind!=T.Kind.UnspecifiedKind&&t.writeEnum(5,this.kind),this.display_name.length&&t.writeString(6,this.display_name),this.has_signature_documentation&&t.writeMessage(7,this.signature_documentation,(()=>this.signature_documentation.serialize(t))),this.enclosing_symbol.length&&t.writeString(8,this.enclosing_symbol),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new T;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:i.symbol=t.readString();break;case 3:a.Message.addToRepeatedField(i,3,t.readString());break;case 4:t.readMessage(i.relationships,(()=>a.Message.addToRepeatedWrapperField(i,4,O.deserialize(t),O)));break;case 5:i.kind=t.readEnum();break;case 6:i.display_name=t.readString();break;case 7:t.readMessage(i.signature_documentation,(()=>i.signature_documentation=k.deserialize(t)));break;case 8:i.enclosing_symbol=t.readString();break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return T.deserialize(e)}}u=new WeakMap,e.SymbolInformation=T,function(e){let t;!function(e){e[e.UnspecifiedKind=0]="UnspecifiedKind",e[e.AbstractMethod=66]="AbstractMethod",e[e.Accessor=72]="Accessor",e[e.Array=1]="Array",e[e.Assertion=2]="Assertion",e[e.AssociatedType=3]="AssociatedType",e[e.Attribute=4]="Attribute",e[e.Axiom=5]="Axiom",e[e.Boolean=6]="Boolean",e[e.Class=7]="Class",e[e.Constant=8]="Constant",e[e.Constructor=9]="Constructor",e[e.Contract=62]="Contract",e[e.DataFamily=10]="DataFamily",e[e.Delegate=73]="Delegate",e[e.Enum=11]="Enum",e[e.EnumMember=12]="EnumMember",e[e.Error=63]="Error",e[e.Event=13]="Event",e[e.Fact=14]="Fact",e[e.Field=15]="Field",e[e.File=16]="File",e[e.Function=17]="Function",e[e.Getter=18]="Getter",e[e.Grammar=19]="Grammar",e[e.Instance=20]="Instance",e[e.Interface=21]="Interface",e[e.Key=22]="Key",e[e.Lang=23]="Lang",e[e.Lemma=24]="Lemma",e[e.Library=64]="Library",e[e.Macro=25]="Macro",e[e.Method=26]="Method",e[e.MethodAlias=74]="MethodAlias",e[e.MethodReceiver=27]="MethodReceiver",e[e.MethodSpecification=67]="MethodSpecification",e[e.Message=28]="Message",e[e.Modifier=65]="Modifier",e[e.Module=29]="Module",e[e.Namespace=30]="Namespace",e[e.Null=31]="Null",e[e.Number=32]="Number",e[e.Object=33]="Object",e[e.Operator=34]="Operator",e[e.Package=35]="Package",e[e.PackageObject=36]="PackageObject",e[e.Parameter=37]="Parameter",e[e.ParameterLabel=38]="ParameterLabel",e[e.Pattern=39]="Pattern",e[e.Predicate=40]="Predicate",e[e.Property=41]="Property",e[e.Protocol=42]="Protocol",e[e.ProtocolMethod=68]="ProtocolMethod",e[e.PureVirtualMethod=69]="PureVirtualMethod",e[e.Quasiquoter=43]="Quasiquoter",e[e.SelfParameter=44]="SelfParameter",e[e.Setter=45]="Setter",e[e.Signature=46]="Signature",e[e.SingletonClass=75]="SingletonClass",e[e.SingletonMethod=76]="SingletonMethod",e[e.StaticDataMember=77]="StaticDataMember",e[e.StaticEvent=78]="StaticEvent",e[e.StaticField=79]="StaticField",e[e.StaticMethod=80]="StaticMethod",e[e.StaticProperty=81]="StaticProperty",e[e.StaticVariable=82]="StaticVariable",e[e.String=48]="String",e[e.Struct=49]="Struct",e[e.Subscript=47]="Subscript",e[e.Tactic=50]="Tactic",e[e.Theorem=51]="Theorem",e[e.ThisParameter=52]="ThisParameter",e[e.Trait=53]="Trait",e[e.TraitMethod=70]="TraitMethod",e[e.Type=54]="Type",e[e.TypeAlias=55]="TypeAlias",e[e.TypeClass=56]="TypeClass",e[e.TypeClassMethod=71]="TypeClassMethod",e[e.TypeFamily=57]="TypeFamily",e[e.TypeParameter=58]="TypeParameter",e[e.Union=59]="Union",e[e.Value=60]="Value",e[e.Variable=61]="Variable"}(t=e.Kind||(e.Kind={}))}(T=e.SymbolInformation||(e.SymbolInformation={}));class O extends a.Message{constructor(e){super(),d.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],o(this,d,"f")),Array.isArray(e)||"object"!=typeof e||("symbol"in e&&null!=e.symbol&&(this.symbol=e.symbol),"is_reference"in e&&null!=e.is_reference&&(this.is_reference=e.is_reference),"is_implementation"in e&&null!=e.is_implementation&&(this.is_implementation=e.is_implementation),"is_type_definition"in e&&null!=e.is_type_definition&&(this.is_type_definition=e.is_type_definition),"is_definition"in e&&null!=e.is_definition&&(this.is_definition=e.is_definition))}get symbol(){return a.Message.getFieldWithDefault(this,1,"")}set symbol(e){a.Message.setField(this,1,e)}get is_reference(){return a.Message.getFieldWithDefault(this,2,!1)}set is_reference(e){a.Message.setField(this,2,e)}get is_implementation(){return a.Message.getFieldWithDefault(this,3,!1)}set is_implementation(e){a.Message.setField(this,3,e)}get is_type_definition(){return a.Message.getFieldWithDefault(this,4,!1)}set is_type_definition(e){a.Message.setField(this,4,e)}get is_definition(){return a.Message.getFieldWithDefault(this,5,!1)}set is_definition(e){a.Message.setField(this,5,e)}static fromObject(e){const t=new O({});return null!=e.symbol&&(t.symbol=e.symbol),null!=e.is_reference&&(t.is_reference=e.is_reference),null!=e.is_implementation&&(t.is_implementation=e.is_implementation),null!=e.is_type_definition&&(t.is_type_definition=e.is_type_definition),null!=e.is_definition&&(t.is_definition=e.is_definition),t}toObject(){const e={};return null!=this.symbol&&(e.symbol=this.symbol),null!=this.is_reference&&(e.is_reference=this.is_reference),null!=this.is_implementation&&(e.is_implementation=this.is_implementation),null!=this.is_type_definition&&(e.is_type_definition=this.is_type_definition),null!=this.is_definition&&(e.is_definition=this.is_definition),e}serialize(e){const t=e||new a.BinaryWriter;if(this.symbol.length&&t.writeString(1,this.symbol),0!=this.is_reference&&t.writeBool(2,this.is_reference),0!=this.is_implementation&&t.writeBool(3,this.is_implementation),0!=this.is_type_definition&&t.writeBool(4,this.is_type_definition),0!=this.is_definition&&t.writeBool(5,this.is_definition),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new O;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:i.symbol=t.readString();break;case 2:i.is_reference=t.readBool();break;case 3:i.is_implementation=t.readBool();break;case 4:i.is_type_definition=t.readBool();break;case 5:i.is_definition=t.readBool();break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return O.deserialize(e)}}d=new WeakMap,e.Relationship=O;class j extends a.Message{constructor(e){super(),h.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[1,4,6,7],o(this,h,"f")),Array.isArray(e)||"object"!=typeof e||("range"in e&&null!=e.range&&(this.range=e.range),"symbol"in e&&null!=e.symbol&&(this.symbol=e.symbol),"symbol_roles"in e&&null!=e.symbol_roles&&(this.symbol_roles=e.symbol_roles),"override_documentation"in e&&null!=e.override_documentation&&(this.override_documentation=e.override_documentation),"syntax_kind"in e&&null!=e.syntax_kind&&(this.syntax_kind=e.syntax_kind),"diagnostics"in e&&null!=e.diagnostics&&(this.diagnostics=e.diagnostics),"enclosing_range"in e&&null!=e.enclosing_range&&(this.enclosing_range=e.enclosing_range))}get range(){return a.Message.getFieldWithDefault(this,1,[])}set range(e){a.Message.setField(this,1,e)}get symbol(){return a.Message.getFieldWithDefault(this,2,"")}set symbol(e){a.Message.setField(this,2,e)}get symbol_roles(){return a.Message.getFieldWithDefault(this,3,0)}set symbol_roles(e){a.Message.setField(this,3,e)}get override_documentation(){return a.Message.getFieldWithDefault(this,4,[])}set override_documentation(e){a.Message.setField(this,4,e)}get syntax_kind(){return a.Message.getFieldWithDefault(this,5,y.UnspecifiedSyntaxKind)}set syntax_kind(e){a.Message.setField(this,5,e)}get diagnostics(){return a.Message.getRepeatedWrapperField(this,I,6)}set diagnostics(e){a.Message.setRepeatedWrapperField(this,6,e)}get enclosing_range(){return a.Message.getFieldWithDefault(this,7,[])}set enclosing_range(e){a.Message.setField(this,7,e)}static fromObject(e){const t=new j({});return null!=e.range&&(t.range=e.range),null!=e.symbol&&(t.symbol=e.symbol),null!=e.symbol_roles&&(t.symbol_roles=e.symbol_roles),null!=e.override_documentation&&(t.override_documentation=e.override_documentation),null!=e.syntax_kind&&(t.syntax_kind=e.syntax_kind),null!=e.diagnostics&&(t.diagnostics=e.diagnostics.map((e=>I.fromObject(e)))),null!=e.enclosing_range&&(t.enclosing_range=e.enclosing_range),t}toObject(){const e={};return null!=this.range&&(e.range=this.range),null!=this.symbol&&(e.symbol=this.symbol),null!=this.symbol_roles&&(e.symbol_roles=this.symbol_roles),null!=this.override_documentation&&(e.override_documentation=this.override_documentation),null!=this.syntax_kind&&(e.syntax_kind=this.syntax_kind),null!=this.diagnostics&&(e.diagnostics=this.diagnostics.map((e=>e.toObject()))),null!=this.enclosing_range&&(e.enclosing_range=this.enclosing_range),e}serialize(e){const t=e||new a.BinaryWriter;if(this.range.length&&t.writePackedInt32(1,this.range),this.symbol.length&&t.writeString(2,this.symbol),0!=this.symbol_roles&&t.writeInt32(3,this.symbol_roles),this.override_documentation.length&&t.writeRepeatedString(4,this.override_documentation),this.syntax_kind!=y.UnspecifiedSyntaxKind&&t.writeEnum(5,this.syntax_kind),this.diagnostics.length&&t.writeRepeatedMessage(6,this.diagnostics,(e=>e.serialize(t))),this.enclosing_range.length&&t.writePackedInt32(7,this.enclosing_range),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new j;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:i.range=t.readPackedInt32();break;case 2:i.symbol=t.readString();break;case 3:i.symbol_roles=t.readInt32();break;case 4:a.Message.addToRepeatedField(i,4,t.readString());break;case 5:i.syntax_kind=t.readEnum();break;case 6:t.readMessage(i.diagnostics,(()=>a.Message.addToRepeatedWrapperField(i,6,I.deserialize(t),I)));break;case 7:i.enclosing_range=t.readPackedInt32();break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return j.deserialize(e)}}h=new WeakMap,e.Occurrence=j;class I extends a.Message{constructor(e){super(),p.set(this,[]),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[5],o(this,p,"f")),Array.isArray(e)||"object"!=typeof e||("severity"in e&&null!=e.severity&&(this.severity=e.severity),"code"in e&&null!=e.code&&(this.code=e.code),"message"in e&&null!=e.message&&(this.message=e.message),"source"in e&&null!=e.source&&(this.source=e.source),"tags"in e&&null!=e.tags&&(this.tags=e.tags))}get severity(){return a.Message.getFieldWithDefault(this,1,b.UnspecifiedSeverity)}set severity(e){a.Message.setField(this,1,e)}get code(){return a.Message.getFieldWithDefault(this,2,"")}set code(e){a.Message.setField(this,2,e)}get message(){return a.Message.getFieldWithDefault(this,3,"")}set message(e){a.Message.setField(this,3,e)}get source(){return a.Message.getFieldWithDefault(this,4,"")}set source(e){a.Message.setField(this,4,e)}get tags(){return a.Message.getFieldWithDefault(this,5,[])}set tags(e){a.Message.setField(this,5,e)}static fromObject(e){const t=new I({});return null!=e.severity&&(t.severity=e.severity),null!=e.code&&(t.code=e.code),null!=e.message&&(t.message=e.message),null!=e.source&&(t.source=e.source),null!=e.tags&&(t.tags=e.tags),t}toObject(){const e={};return null!=this.severity&&(e.severity=this.severity),null!=this.code&&(e.code=this.code),null!=this.message&&(e.message=this.message),null!=this.source&&(e.source=this.source),null!=this.tags&&(e.tags=this.tags),e}serialize(e){const t=e||new a.BinaryWriter;if(this.severity!=b.UnspecifiedSeverity&&t.writeEnum(1,this.severity),this.code.length&&t.writeString(2,this.code),this.message.length&&t.writeString(3,this.message),this.source.length&&t.writeString(4,this.source),this.tags.length&&t.writePackedEnum(5,this.tags),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),i=new I;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:i.severity=t.readEnum();break;case 2:i.code=t.readString();break;case 3:i.message=t.readString();break;case 4:i.source=t.readString();break;case 5:i.tags=t.readPackedEnum();break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return I.deserialize(e)}}p=new WeakMap,e.Diagnostic=I}(t.scip||(t.scip={}))},3160:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendStatus=t.withStatus=t.setShowProgressRateLimit=t.setQuiet=void 0;const i={quiet:!0},s=new class{constructor(e=1){this.depth=0,this.showProgressRateLimit=e,this.lastProgressMsg=new Date}timestamp(){return`(${(new Date).toLocaleTimeString("default",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}) `}section(e){this.write_message(this.depth,e),this.depth+=1,this.lastProgressMsg=new Date}message(e){this.write_message(this.depth+1,e)}write_message(e,t){process.stdout.write(this.timestamp()),e>0&&process.stdout.write("  ".repeat(this.depth)),console.log(t)}complete(){this.depth-=1}progress(e){const t=new Date;(0==this.showProgressRateLimit||!this.lastProgressMsg||(t.getTime()-this.lastProgressMsg.getTime())/1e3>this.showProgressRateLimit)&&(this.lastProgressMsg=t,this.write_message(this.depth+1,"- "+e))}};t.setQuiet=function(e){i.quiet=e},t.setShowProgressRateLimit=function(e){s.showProgressRateLimit=e},t.withStatus=function(e,t){const n=i.quiet?{section:()=>{},complete:()=>{},progress:e=>{},message:e=>{}}:s;n.section(e);const r=t(n);return n.complete(),r},t.sendStatus=function(e){i.quiet||s.write_message(0,e)}},3466:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.make=t.makeTerm=t.makeType=t.makeMethod=t.makeMeta=t.makeParameter=t.makeClass=t.makeModuleInit=t.makeModule=t.makePackage=t.setProjectNamespace=void 0;const s=i(2698),n=i(7497);let r=new Map;function o(e){return n.ScipSymbol.package(e.name,e.version)}t.setProjectNamespace=function(e,t){r.set(e,t)},t.makePackage=o,t.makeModule=function(e,t){let i=r.get(e.name);return i&&(t=i+"."+t),n.ScipSymbol.global(o(e),(0,s.packageDescriptor)(t))},t.makeModuleInit=function(e,t){let i=r.get(e.name);return i&&(t=i+"."+t),n.ScipSymbol.global(n.ScipSymbol.global(o(e),(0,s.packageDescriptor)(t)),(0,s.metaDescriptor)("__init__"))},t.makeClass=function(e,t,i){let a=r.get(e.name);return a&&(t=a+"."+t),n.ScipSymbol.global(n.ScipSymbol.global(o(e),(0,s.packageDescriptor)(t)),(0,s.typeDescriptor)(i))},t.makeParameter=function(e,t){return n.ScipSymbol.global(e,(0,s.parameterDescriptor)(t))},t.makeMeta=function(e,t){return n.ScipSymbol.global(e,(0,s.metaDescriptor)(t))},t.makeMethod=function(e,t){return n.ScipSymbol.global(e,(0,s.methodDescriptor)(t))},t.makeType=function(e,t){return n.ScipSymbol.global(e,(0,s.typeDescriptor)(t))},t.makeTerm=function(e,t){return n.ScipSymbol.global(e,(0,s.termDescriptor)(t))},t.make=function(e,t){return n.ScipSymbol.local(t.next())}},3373:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeVisitor=void 0;const a=r(i(1017)),l=i(563),c=i(427),u=i(1464),d=r(i(1847)),h=i(2464),p=r(i(3466)),m=i(7497),g=i(7349),f=i(4754),y=r(i(8494)),b=i(1133),_=r(i(1133)),v=i(3151),S=i(5678),w=i(8905),P=i(6886),k=i(4411),x=o(i(9567)),M=r(i(33)),F=i(5809),T=i(1272),O=i(5839),j=i(5168);var I=0;function D(e,t,...i){return e||(I>1?(console.log(t,...i),(0,O.assert)(e,t)):1===I&&console.warn(t,...i)),e}new Set;const C=function(e){const t=[];for(let i=0;i<e.length;i++){let s=e[i];if("function"==typeof s){t.push(s(...e.slice(i+1)));break}t.push(s)}return t},R=(...e)=>{I>=2&&console.log(...C(e))},E=(...e)=>{I>=1&&console.log(...C(e))},A={isCancellationRequested:!1,onCancellationRequested:F.Event.None};function L(e,t){const i=(0,u.convertOffsetToPosition)(e.start,t),s=new g.Position(i.line,i.character),n=(0,u.convertOffsetToPosition)(e.start+e.length,t),r=new g.Position(n.line,n.character);return new f.Range(s,r)}class N extends c.ParseTreeWalker{constructor(e){super(),this.config=e,this.config.scipConfig.dev&&(I=2),E("=> Working file:",e.sourceFile.getFilePath(),"<=="),this.evaluator=e.evaluator,this.program=e.program,this.document=e.document,this.externalSymbols=e.externalSymbols,this.counter=new k.Counter,this.documentSymbols=new Map,this.globalSymbols=this.config.globalSymbols,this.symbolInformationForNode=new Set,this.execEnv=this.config.pyrightConfig.getExecutionEnvironments()[0],this.stdlibPackage=new x.default("python-stdlib",(0,P.versionToString)(this.execEnv.pythonVersion),[]),this.projectPackage=new x.default(this.config.scipConfig.projectName,this.config.scipConfig.projectVersion,[]),this.cwd=a.resolve(process.cwd()).toLowerCase(),this._docstringWriter=new v.TypeStubExtendedWriter(this.config.sourceFile,this.evaluator)}visitModule(e){const t=(0,l.getFileInfo)(e);this.fileInfo=t;const i=this.getPackageInfo(e,t.moduleName);if(i){if(D(i===this.projectPackage,"expected pythonPackage to be this.projectPackage")){const s=p.makeModuleInit(i,t.moduleName);this.document.occurrences.push(new h.scip.Occurrence({symbol_roles:h.scip.SymbolRole.Definition,symbol:s.value,range:[0,0,0]}));const n=[`(module) ${t.moduleName}`],r=y.getDocString(e.statements);r&&n.push((0,T.convertDocStringToMarkdown)(r.trim())),this.document.symbols.push(new h.scip.SymbolInformation({symbol:s.value,documentation:n}))}}else D(!1,"Unable to find module for node");return!0}visitClass(e){return this._docstringWriter.visitClass(e),!0}visitTypeAnnotation(e){if(y.getEnclosingClass(e,!0)){const t=this.program.getHoverForPosition(this.fileInfo.filePath,(0,u.convertOffsetToPosition)(e.start,this.fileInfo.lines),"markdown",A);this.document.symbols.push(new h.scip.SymbolInformation({symbol:this.getScipSymbol(e).value,documentation:W(t)}))}return!0}visitAssignment(e){if(38==e.leftExpression.nodeType){const t=this.evaluator.getDeclarationsForNameNode(e.leftExpression)||[];if(t.length>0){let i=t[0];if(i.node.parent&&i.node.parent.id==e.id){this._docstringWriter.visitAssignment(e);let t=[],s=this._docstringWriter.docstrings.get(e.id);s&&t.push("```python\n"+s.join("\n")+"\n```"),this.document.symbols.push(new h.scip.SymbolInformation({symbol:this.getScipSymbol(i.node).value,documentation:t}))}}}return!0}getFunctionRelationships(e){if(e.name.value.startsWith("__"))return;let t=this.evaluator.getTypeOfFunction(e),i=y.getEnclosingClass(e,!0);if(!i)return;const s=this.evaluator.getTypeOfClass(i);if(!s)return;let n=new Map,r=s.classType;for(const i of r.details.baseClasses){if(7!==i.category)continue;let s=i.details.fields.get(e.name.value);if(!s){let t=(0,j.getClassFieldsRecursive)(i).get(e.name.value);if(!t||1===t.classType.category)continue;s=t.classType.details.fields.get(e.name.value)}let r=this.evaluator.getEffectiveTypeOfSymbol(s);if(5!==r.category)continue;if(!d.isTypeImplementable(t.functionType,r,!1,!0,0,!0))continue;let o=r.details.declaration,a=this.typeToSymbol(o.node.name,o.node,r);n.set(a.value,new h.scip.Relationship({symbol:a.value,is_implementation:!0}))}let o=Array.from(n.values());return o.length>0?o:void 0}visitFunction(e){this._docstringWriter.visitFunction(e);const t=[];let i=this._docstringWriter.docstrings.get(e.id);t.push("```python\n"+i.join("\n")+"\n```");let s=y.getDocString(e.suite.statements);s&&t.push(s);let n=this.getFunctionRelationships(e);return this.document.symbols.push(new h.scip.SymbolInformation({symbol:this.getScipSymbol(e).value,documentation:t,relationships:n})),e.decorators.forEach((e=>this.walk(e))),this.visitName(e.name),e.returnTypeAnnotation&&this.walk(e.returnTypeAnnotation),e.parameters.forEach((e=>{const t=this.getScipSymbol(e),i=e.name?(0,S.extractParameterDocumentation)(s||"",e.name.value):void 0,n=i?[i]:void 0;this.document.symbols.push(new h.scip.SymbolInformation({symbol:t.value,documentation:n})),this.walk(e)})),this.walk(e.suite),!1}visitImport(e){return this._docstringWriter.visitImport(e),e.list.forEach((e=>this.walk(e))),!1}visitImportFrom(e){const t=this.getScipSymbol(e);return this.document.occurrences.push(new h.scip.Occurrence({symbol_roles:h.scip.SymbolRole.ReadAccess,symbol:t.value,range:L(e.module,this.fileInfo.lines).toLsif()})),this.moduleNameNodeToPythonPackage(e.module)===this.stdlibPackage&&this.emitExternalSymbolInformation(e.module,t,[]),e.imports.forEach((e=>this.walk(e))),!1}visitImportFromAs(e){return this.pushNewOccurrence(e,this.getScipSymbol(e)),!1}visitImportAs(e){let t=z(e.module);const i=(0,l.getImportInfo)(e.module);if(i&&i.resolvedPaths[i.resolvedPaths.length-1]&&a.resolve(i.resolvedPaths[i.resolvedPaths.length-1]).toLowerCase().startsWith(this.cwd)){t=this.program._getImportNameForFile(i.resolvedPaths[i.resolvedPaths.length-1]);const s=p.makeModuleInit(this.projectPackage,t);this.pushNewOccurrence(e.module,s)}else{const i=this.moduleNameNodeToPythonPackage(e.module);if(i){const s=p.makeModuleInit(i,t);this.pushNewOccurrence(e.module,s)}else{const i=this.getLocalForDeclaration(e,[`(module): ${t} [unable to resolve module]`]);this.pushNewOccurrence(e.module,i)}}return e.alias&&this.pushNewOccurrence(e.alias,this.getLocalForDeclaration(e.alias)),!1}emitDeclarationWithoutNode(e,t){const i=e.parent;if(37===i.nodeType){const t=this.getScipSymbol(i);if(t)return B(e,21,22)?(D(!1,"Should never see ImportAs or ImportFrom in visitName"),!0):(this.pushNewOccurrence(e,t),!0)}return D(!1,"unhandled missing node for declaration"),!0}emitDeclaration(e,t){var i;const s=e.parent;if(!t.node)return this.emitDeclarationWithoutNode(e,t);const n=this.rawGetLsifSymbol(t.node);if(n){if(t.node.id===s.id||t.node.id===e.id)switch(t.node.nodeType){case 28:case 10:this.pushNewOccurrence(e,n,h.scip.SymbolRole.Definition,t.node);break;default:this.pushNewOccurrence(e,n,h.scip.SymbolRole.Definition)}else this.pushNewOccurrence(e,n);return!0}const r=t.node.id===s.id,o=this.evaluator.getBuiltInType(e,e.value);if(this.isStdlib(t,o))return this.emitBuiltinScipSymbol(e,o,t),!0;const a=t.node;switch(a.nodeType){case 21:{if(a.alias)return this.pushNewOccurrence(e,this.getScipSymbol(a.alias)),!0;const i=z(a.module),s=this.getSymbolOnce(a,(()=>{const s=this.moduleNameNodeToPythonPackage(a.module,t);return s?((0,O.assert)(a!=e.parent,"Must not be the definition"),(0,O.assert)(s,"Must have a python package: "+i),p.makeModuleInit(s,i)):this.getLocalForDeclaration(e)}));let n=e;for(;n.parent&&35===n.parent.nodeType;){const e=n.parent.memberName,t=this.evaluator.getDeclarationsForNameNode(e,!1);if(t&&t.length>0)break;n=n.parent}return this.pushNewOccurrence(n,s),!0}case 28:if(r)break;return this.pushNewOccurrence(e,this.getScipSymbol(a)),!0;case 38:B(a,33)&&this.getLocalForDeclaration(a)}if((0,w.isIntrinsicDeclaration)(t))return this.pushNewOccurrence(e,this.getIntrinsicSymbol(e)),!0;const c=this.evaluator.getTypeForDeclaration(t);if((0,w.isAliasDeclaration)(t)){const i=this.evaluator.resolveAliasDeclaration(t,!0,!0),s=i?this.evaluator.getTypeForDeclaration(i):void 0;if(i||E("Missing dependency for:",e),c.type)return this.pushTypeReference(e,t.node,c.type),!0;if(i&&s&&s.type){const t=e.id===(null==i?void 0:i.node.id),n=(0,l.getFileInfo)(e),r=this.program.getHoverForPosition(n.filePath,(0,u.convertOffsetToPosition)(e.start,n.lines),"markdown",A);if(r){const i=this.typeToSymbol(e,a,s.type);this.rawSetLsifSymbol(a,i,i.isLocal()),t&&this.emitSymbolInformationOnce(e,i,W(r))}return this.pushTypeReference(e,i.node,s.type),!0}return this.pushNewOccurrence(e,this.getScipSymbol(t.node)),!0}if(r){switch(t.node.nodeType){case 10:{const n=this.getScipSymbol(s),r=[],o=this._docstringWriter.docstrings.get(s.id);o&&r.push("```python\n"+o.join("\n")+"\n```");const a=null===(i=y.getDocString(t.node.suite.statements))||void 0===i?void 0:i.trim();a&&r.push((0,T.convertDocStringToMarkdown)(a));let l,u=c.type;u&&7===u.category&&(l=u.details.baseClasses.filter((e=>7===e.category&&(("builtins"!==e.details.moduleName||"object"!=e.details.name)&&!!this.guessPackage(e.details.moduleName,e.details.filePath)))).map((e=>{(0,O.assert)(7===e.category);const t=this.guessPackage(e.details.moduleName,e.details.filePath),i=p.makeClass(t,e.details.moduleName,e.details.name).value;return new h.scip.Relationship({symbol:i,is_implementation:!0})}))),this.document.symbols.push(new h.scip.SymbolInformation({symbol:n.value,documentation:r,relationships:l})),this.pushNewOccurrence(e,this.getScipSymbol(t.node),h.scip.SymbolRole.Definition,t.node);break}default:this.pushNewOccurrence(e,this.getScipSymbol(t.node),h.scip.SymbolRole.Definition)}return!0}if(t.node.id==e.id){const i=this.getScipSymbol(t.node);return this.pushNewOccurrence(e,i,h.scip.SymbolRole.Definition),!0}const d=this.rawGetLsifSymbol(t.node);if(d)return this.pushNewOccurrence(e,d,h.scip.SymbolRole.ReadAccess),!0;const m=this.getScipSymbol(t.node);return this.pushNewOccurrence(e,m),!0}isStdlib(e,t){if(_.isUnknown(t))return!1;switch(t.category){case 7:return b.ClassType.isBuiltIn(t)||b.ClassType.isSpecialBuiltIn(t);case 8:return U(t.moduleName);case 5:return U(e.moduleName);case 6:return this.isStdlib(e,t.overloads[0]);case 9:return void 0!==t.subtypes.find((t=>this.isStdlib(e,t)))}return D(!1,"Unhandled builtin category:",t),!1}emitNameWithoutDeclaration(e){let t=e.parent;switch(t.nodeType){case 37:D(!1,"I don't think that this should be possible");break;case 35:return!0}return R("    NO DECL:",y.printParseNodeType,t.nodeType),this.pushNewOccurrence(e,this.getLocalForDeclaration(e)),!0}visitName(e){if(!e.parent)throw`No parent for named node: ${e.token.value}`;if("_"===e.token.value)return!0;const t=this.evaluator.getDeclarationsForNameNode(e)||[];if(0===t.length)return this.emitNameWithoutDeclaration(e);const i=t[0];return this.emitDeclaration(e,i)}rawGetLsifSymbol(e){return this.globalSymbols.get(e.id)||this.documentSymbols.get(e.id)}rawSetLsifSymbol(e,t,i){i?this.documentSymbols.set(e.id,t):this.globalSymbols.set(e.id,t)}getScipSymbol(e,t){const i=this.rawGetLsifSymbol(e);if(i)return i;let s,n;if(t&&(s=t.moduleName,n=t.pythonPackage),void 0===s){const t=(0,l.getFileInfo)(e);if(!t)throw"no file info";if(s=t.moduleName,"builtins"==s)return this.emitBuiltinScipSymbol(e);if(M.stdlib_module_names.has(s)){const t=this.makeScipSymbol(this.stdlibPackage,s,e);return this.emitExternalSymbolInformation(e,t,[]),t}}if(void 0===n&&(n=this.getPackageInfo(e,s),!n)){if(this.rawGetLsifSymbol(e))return this.rawGetLsifSymbol(e);const t=m.ScipSymbol.local(this.counter.next());return this.rawSetLsifSymbol(e,t,!0),this.emitSymbolInformationOnce(e,t),t}let r=this.makeScipSymbol(n,s,e);return this.rawSetLsifSymbol(e,r,!0),r}getIntrinsicSymbol(e){return m.ScipSymbol.local(this.counter.next())}emitBuiltinScipSymbol(e,t,i){const s=e;if(void 0===t&&(t=this.evaluator.getBuiltInType(s,s.value)),!_.isUnknown(t))switch(t.category){case 5:{const e=this.getIntrinsicSymbol(s);this.pushNewOccurrence(s,e);const i=t.details.docString;return this.emitExternalSymbolInformation(s,e,i?[i]:[]),e}case 6:{if(!i)break;const e=this.getScipSymbol(i.node);this.pushNewOccurrence(s,e);const n=t.overloads.filter((e=>e.details.docString)),r=[];return n.length>0&&n[1].details.docString&&r.push(n[1].details.docString),this.emitExternalSymbolInformation(s,e,r),e}case 7:{const e=p.makeClass(this.stdlibPackage,"builtins",s.value);this.pushNewOccurrence(s,e);const i=t.details.docString;return this.emitExternalSymbolInformation(s,e,i?[i]:[]),e}case 8:{const e=p.makeModuleInit(this.stdlibPackage,t.moduleName);return this.pushNewOccurrence(s,e),this.emitExternalSymbolInformation(s,e,[]),e}case 3:return m.ScipSymbol.empty();case 9:{const s=t.subtypes[0];return this.emitBuiltinScipSymbol(e,s,i)}case 10:D(!1,"unexpected TypeVar",e,t,i);break;case 2:break;case 4:case 0:return m.ScipSymbol.local(this.counter.next())}return this.makeScipSymbol(this.stdlibPackage,"builtins",s)}makeScipSymbol(e,t,i){switch(i.nodeType){case 36:return"builtins"===(t=(0,l.getFileInfo)(i).moduleName)?p.makeModule(this.stdlibPackage,"builtins"):p.makeModule(e,t);case 37:{if(0===i.nameParts.length)return i.leadingDots>0||D(!1,"Unknown ModuleNamer to handle",i),m.ScipSymbol.local(this.counter.next());const t=i.nameParts[0];M.stdlib_module_names.has(t.value)&&(e=this.stdlibPackage);const s=(0,l.getImportInfo)(i);let n=i.nameParts.map((e=>e.value)).join(".");return s&&s.resolvedPaths[s.resolvedPaths.length-1]&&s.resolvedPaths[s.resolvedPaths.length-1].toLowerCase().startsWith(this.cwd)&&(n=this.program._getImportNameForFile(s.resolvedPaths[s.resolvedPaths.length-1])),p.makeModuleInit(e,n)}case 35:return D(!1,"Not supposed to get a member access"),m.ScipSymbol.empty();case 41:return i.name?p.makeParameter(this.getScipSymbol(i.parent),i.name.value):(R("Paramerter with no name",i),m.ScipSymbol.local(this.counter.next()));case 10:return p.makeType(this.getScipSymbol(i.parent),i.name.value);case 28:{let e=y.getEnclosingClass(i,!1);return e?p.makeMethod(this.getScipSymbol(e),i.name.value):p.makeMethod(this.getScipSymbol(i.parent),i.name.value)}case 50:return i.parent?this.getScipSymbol(i.parent):p.makeMeta(this.getScipSymbol(i.parent),"#");case 38:{const e=i.parent;if(!e)throw"must have parent";if(35===e.nodeType){const t=this.evaluator.getTypeOfExpression(e.leftExpression);if(10===t.type.category){const e=t.type.details.boundType;return this.getSymbolOnce(i,(()=>{const t=this.getPackageInfo(i,e.details.moduleName);let s=p.makeTerm(p.makeType(p.makeModule(t,e.details.moduleName),e.details.name),i.value);return this.emitSymbolInformationOnce(i,s),s}))}}const t=y.getEnclosingSuite(i);return t&&(y.getEnclosingFunction(i)||y.getEnclosingLambda(i))?m.ScipSymbol.local(this.counter.next()):p.makeTerm(this.getScipSymbol(t||e),i.value)}case 54:return 38===i.valueExpression.nodeType?p.makeTerm(this.getScipSymbol(y.getEnclosingSuite(i)||i.parent),i.valueExpression.value):(D(!1,"Unhandled type annotation"),m.ScipSymbol.local(this.counter.next()));case 62:return p.makeTerm(this.getScipSymbol(i.parent),"FuncAnnotation");case 13:return D(!1,"Should not handle decorators directly"),m.ScipSymbol.local(this.counter.next());case 3:return y.getEnclosingClassOrFunction(i)?e.version?this.getScipSymbol(i.parent):m.ScipSymbol.local(this.counter.next()):this.getScipSymbol(i.parent);case 21:return p.makeModuleInit(e,t);case 22:{const e=this.moduleNameNodeToPythonPackage(i.module);return e?this.makeScipSymbol(e,z(i.module),i.module):this.getScipSymbol(i.module)}case 23:{const e=this.evaluator.getDeclarationsForNameNode(i.name);if(e){const t=e[0],s=this.evaluator.resolveAliasDeclaration(t,!0);if(!s)return E("Interesting not getting the resolved:",t),m.ScipSymbol.local(this.counter.next());if(s.node&&s.node.id!=i.id)return this.getScipSymbol(s.node)}const t=this.getAliasedSymbolTypeForName(i,i.name.value);if(t&&8===t.category){const e=i.parent;if((0,O.assert)(e),22===e.nodeType){const t=this.moduleNameNodeToPythonPackage(e.module)||this.projectPackage;return p.makeModuleInit(t,[...e.module.nameParts,i.name].map((e=>e.value)).join("."))}}return m.ScipSymbol.local(this.counter.next())}case 30:case 33:return m.ScipSymbol.local(this.counter.next());case 32:return D(!1,"Should never enter ListComprehension directly"),m.ScipSymbol.empty();case 58:case 59:case 19:case 26:case 53:case 25:case 57:case 9:case 47:case 52:case 31:case 34:case 1:case 7:case 48:return this.getScipSymbol(i.parent);default:return D(!1,`Unhandled: ${i.nodeType}: ${y.printParseNodeType(i.nodeType)}`,y.getFileInfoFromNode(i).filePath),i.parent?this.getScipSymbol(i.parent):m.ScipSymbol.local(this.counter.next())}}typeToSymbol(e,t,i){if(_.isFunction(i)){const s=i.details.declaration;if(!s)return m.ScipSymbol.local(this.counter.next());const n=s.moduleName;let r=this.guessPackage(n,s.path);if(!r)return m.ScipSymbol.local(this.counter.next());const o=y.getEnclosingClass(t);if(o){const t=this.evaluator.getTypeOfClass(o);if(t){let i=t.classType;const s=this.guessPackage(i.details.moduleName,i.details.filePath),n=p.makeClass(s,i.details.moduleName,i.details.name);return p.makeMethod(n,e.value)}return m.ScipSymbol.local(this.counter.next())}return p.makeMethod(p.makeModule(r,i.details.moduleName),e.value)}if(_.isClass(i)){const t=this.getPackageInfo(e,i.details.moduleName);return p.makeClass(t,i.details.moduleName,e.value)}if(_.isClassInstance(i))throw i=i,"oh yayaya";if(_.isTypeVar(i))throw"typevar";if(_.isModule(i)){const t=this.getPackageInfo(e,i.moduleName);return p.makeModuleInit(t,i.moduleName)}return _.isOverloadedFunction(i)?i.overloads?this.typeToSymbol(e,t,i.overloads[0]):(D(!1,"Didn't think it would be possible to have overloaded w/ no overloads"),m.ScipSymbol.local(this.counter.next())):(D(!1,`Unreachable TypeObj: ${e.value}: ${i.category}`),m.ScipSymbol.local(this.counter.next()))}pushTypeReference(e,t,i){let s=this.rawGetLsifSymbol(t);s||(s=this.typeToSymbol(e,t,i),this.rawSetLsifSymbol(t,s,s.isLocal())),this.pushNewOccurrence(e,s)}getLocalForDeclaration(e,t){const i=this.rawGetLsifSymbol(e);if(i)return i;const s=m.ScipSymbol.local(this.counter.next());return this.rawSetLsifSymbol(e,s,!0),this.emitSymbolInformationOnce(e,s,t),s}pushNewOccurrence(e,t,i=h.scip.SymbolRole.ReadAccess,s){D(t.value.trim()==t.value,`Invalid symbol ${e} -> ${t.value}`),this.document.occurrences.push(new h.scip.Occurrence({symbol_roles:i,symbol:t.value,range:L(e,this.fileInfo.lines).toLsif(),enclosing_range:s&&L(s,this.fileInfo.lines).toLsif()}))}getPackageInfo(e,t){const i=(0,l.getFileInfo)(e);return a.resolve(i.filePath).toLowerCase().startsWith(this.cwd.toLowerCase())?this.projectPackage:this.config.pythonEnvironment.getPackageForModule(t)}emitExternalSymbolInformation(e,t,i){if(!this.externalSymbols.has(t.value)){if(0===i.length){const t=(0,l.getFileInfo)(e),s=this.program.getHoverForPosition(t.filePath,(0,u.convertOffsetToPosition)(e.start,t.lines),"markdown",A);s&&(i=W(s))}0!==i.length&&this.externalSymbols.set(t.value,new h.scip.SymbolInformation({symbol:t.value,documentation:i}))}}emitSymbolInformationOnce(e,t,i){if(this.symbolInformationForNode.has(t.value))return;if(this.symbolInformationForNode.add(t.value),i)return void this.document.symbols.push(new h.scip.SymbolInformation({symbol:t.value,documentation:i}));const s=(0,l.getFileInfo)(e),n=this.program.getHoverForPosition(s.filePath,(0,u.convertOffsetToPosition)(e.start,s.lines),"markdown",A);if(n)return void this.document.symbols.push(new h.scip.SymbolInformation({symbol:t.value,documentation:W(n)}));this._docstringWriter.walk(e);const r=this._docstringWriter.docstrings.get(e.id);if(void 0===r)return;const o="```python\n"+r.join("\n")+"\n```";this.document.symbols.push(new h.scip.SymbolInformation({symbol:t.value,documentation:[o]}))}getAliasedSymbolTypeForName(e,t){const i=this.evaluator.lookUpSymbolRecursive(e,t,!0);if(!i)return;const s=i.symbol.getDeclarations().filter((t=>y.isNodeContainedWithin(e,t.node)&&8===t.type));let n=s.length>0?s[s.length-1]:void 0;if(n||(n=i.symbol.getDeclarations().find((e=>8===e.type))),!n)return;const r=(0,l.getFileInfo)(e),o=this.evaluator.resolveAliasDeclarationWithInfo(n,!0,r.isStubFile);return o&&o.declaration?this.evaluator.getInferredTypeOfDeclaration(i.symbol,n):void 0}moduleNameNodeToPythonPackage(e,t){if(e.leadingDots>0)return this.projectPackage;0===e.nameParts.length&&D(!1,"how can this be?",e);const i=z(e);return this.guessPackage(i,t?t.path:void 0)}guessPackage(e,t){if("builtins"===e)return this.stdlibPackage;if(e.startsWith("."))return this.projectPackage;if(t&&0!==t.length&&a.resolve(t).toLowerCase().startsWith(this.cwd))return this.projectPackage;let i=this.config.pythonEnvironment.getPackageForModule(e);if(i)return i;if(i=this.config.pythonEnvironment.guessPackage(e),i)return i;let s=e.split(".")[0];return M.stdlib_module_names.has(s)?this.stdlibPackage:void 0}getSymbolOnce(e,t){const i=this.rawGetLsifSymbol(e);if(i)return i;const s=t();return this.rawSetLsifSymbol(e,s,s.isLocal()),s}}function z(e){let t="";for(let i=0;i<e.leadingDots;i++)t+=".";return t+=e.nameParts.map((e=>e.value)).join("."),t}function W(e){return e.parts.map((e=>e.python?"```python\n"+e.text+"\n```":e.text))}function B(e,...t){let i=new Set(t),s=e;for(;s;){if(i.has(s.nodeType))return!0;s=s.parent}return!1}function U(e){return"builtins"==e||!!M.stdlib_module_names.has(e)}t.TreeVisitor=N},9204:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(1017)),a=new RegExp(o.sep,"g");t.default=class{constructor(e,t,i){this.packages=i,this._moduleNameToIndex=new Map,this._filepathToIndex=new Map;for(let e=0;e<i.length;e++){const t=i[e];for(const i of t.files)this._filepathToIndex.set(i,e)}}guessPackage(e){let t=e.split(".")[0].toLowerCase();for(let e=0;e<this.packages.length;e++)if(t==this.packages[e].name.toLowerCase())return this.packages[e]}getPackageForModule(e){e=e.toLowerCase();let t=this._moduleNameToIndex.get(e);if(!t){const i=e+".__init__";for(let s=0;s<this.packages.length;s++){const n=this.packages[s];for(let r of n.files){let n=r.slice(0,r.length-o.extname(r).length).replace(a,".").toLowerCase();if(n===e||n===i){t=s;break}}if(t)break}void 0===t&&(t=-1),this._moduleNameToIndex.set(e,t)}if(-1!==t)return this.packages[t]}}},9567:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(1017)),a=new Set([".py",".pyi"]);class l{constructor(e,t,i){this.name=e,this.version=t,this.files=i}static fromPipShow(e){let t="",i="",s=[],n=!1;for(let r of e.split("\n")){if(r=r.trim(),!r)continue;let e=r.split(":",2).map((e=>e.trim()));if(2==e.length)switch(e[0]){case"Name":t=e[1];break;case"Version":i=e[1];case"Files":n=!0}else{if(!n)throw"Unexpected. Thought I should be getting files now";if(r.startsWith("..")||r.includes("__pycache__"))continue;if(!a.has(o.extname(r)))continue;s.push(r)}}return new l(t,i,s)}}t.default=l},3004:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(i(7147)),l=r(i(2081)),c=o(i(9567)),u=o(i(9204)),d=i(3160),h=i(5497);let p,m=()=>{if(void 0===p)if((0,h.sync)("pip3"))p="pip3";else{if(!(0,h.sync)("pip"))throw new Error("Could not find valid pip command");p="pip"}return p};t.default=function(e,t,i){if(i){let s=JSON.parse(a.readFileSync(i).toString()).map((e=>new c.default(e.name,e.version,e.files)));return new u.default(e,t,s)}return(0,d.withStatus)("Evaluating python environment dependencies",(i=>{const s=JSON.parse(l.execSync(`${m()} list --format=json`).toString());i.message("Gathering environment information from `pip`");const n=(r=s.map((e=>e.name)),l.execSync(`${m()} show -f ${r.join(" ")}`).toString().split("\n---"));var r;i.message("Analyzing dependencies");const o=n.map((e=>c.default.fromPipShow(e)));return new u.default(e,t,o)}))}},9491:e=>{e.exports=require("assert")},2081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},1808:e=>{e.exports=require("net")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},7282:e=>{e.exports=require("process")},4521:e=>{e.exports=require("readline")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},4655:e=>{e.exports=require("v8")},1267:e=>{e.exports=require("worker_threads")},9796:e=>{e.exports=require("zlib")},4147:e=>{e.exports=JSON.parse('{"name":"@sourcegraph/scip-python","version":"0.6.0","description":"SCIP indexer for Python","main":"index.js","scripts":{"build":"webpack --mode production --progress","clean":"shx rm -rf ./dist ./out README.md LICENSE.txt","prepack":"npm run clean && shx cp ../../README.md . && shx cp ../../LICENSE.txt . && npm run build","check-snapshots":"npm run update-snapshots -- --check","update-snapshots":"node --enable-source-maps ./index-test.js","test":"jest --forceExit --detectOpenHandles","webpack":"webpack --mode development --progress","watch":"webpack --mode development --progress --watch"},"author":"Sourcegraph","repository":{"type":"git","url":"https://github.com/sourcegraph/scip-python","directory":"packages/pyright-scip/"},"license":"MIT","devDependencies":{"@sourcegraph/eslint-config":"0.26.0","@sourcegraph/prettierrc":"3.0.3","@sourcegraph/tsconfig":"4.0.1","@types/command-exists":"^1.2.0","@types/diff":"^5.0.2","@types/glob":"^7.2.0","@types/google-protobuf":"^3.15.5","@types/jest":"^27.5.0","@types/ora":"^3.2.0","clean-terminal-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^10.2.0","jest":"^27.4.7","jest-junit":"^13.0.0","shx":"^0.3.3","ts-jest":"^27.1.3","ts-loader":"^9.2.6","tsconfig-paths-webpack-plugin":"^3.5.2","typescript":"^4.5.4","webpack":"^5.65.0","webpack-cli":"^4.9.1"},"dependencies":{"@iarna/toml":"^2.2.5","command-exists":"^1.2.9","commander":"^9.2.0","diff":"^5.0.0","glob":"^7.2.0","google-protobuf":"^3.19.3","ts-node":"^10.5.0","vscode-languageserver":"^7.0.0"},"files":["/dist","LICENSE.txt"],"bin":{"scip-python":"index.js"}}')}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return s[e].call(i.exports,i,i.exports,r),i.exports}r.m=s,r.x=()=>{var e=r.O(void 0,[736,194],(()=>r(6608)));return r.O(e)},e=[],r.O=(t,i,s,n)=>{if(!i){var o=1/0;for(u=0;u<e.length;u++){for(var[i,s,n]=e[u],a=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(r.O).every((e=>r.O[e](i[l])))?i.splice(l--,1):(a=!1,n<o&&(o=n));if(a){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[i,s,n]},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,i)=>(r.f[i](e,t),t)),[])),r.u=e=>({194:"pyright-internal",736:"vendor"}[e]+".js"),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i={428:1},r.O.require=e=>i[e],r.f.require=(e,t)=>{i[e]||(e=>{var t=e.modules,s=e.ids,n=e.runtime;for(var o in t)r.o(t,o)&&(r.m[o]=t[o]);n&&n(r);for(var a=0;a<s.length;a++)i[s[a]]=1;r.O()})(require("./"+r.u(e)))},t=r.x,r.x=()=>(r.e(736),r.e(194),t()),r.x()})();
//# sourceMappingURL=scip-python.js.map